!function(e){function t(t){for(var n,r,o=t[0],c=t[1],l=t[3]||[],h=0,u=[];h<o.length;h++)r=o[h],Object.prototype.hasOwnProperty.call(s,r)&&s[r]&&u.push(s[r][0]),s[r]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);for(d&&d(t),l.forEach((function(e){if(void 0===s[e]){s[e]=null;var t=document.createElement("link");a.nc&&t.setAttribute("nonce",a.nc),t.rel="prefetch",t.as="script",t.href=i(e),document.head.appendChild(t)}}));u.length;)u.shift()()}var n={},s={1:0};function i(e){return a.p+""+e+".main.js"}function a(t){if(n[t])return n[t].exports;var s=n[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,a),s.l=!0,s.exports}a.e=function(e){var t=[],n=s[e];if(0!==n)if(n)t.push(n[2]);else{var r=new Promise((function(t,i){n=s[e]=[t,i]}));t.push(n[2]=r);var o,c=document.createElement("script");c.charset="utf-8",c.timeout=120,a.nc&&c.setAttribute("nonce",a.nc),c.src=i(e);var d=new Error;o=function(t){c.onerror=c.onload=null,clearTimeout(l);var n=s[e];if(0!==n){if(n){var i=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;d.message="Loading chunk "+e+" failed.\n("+i+": "+a+")",d.name="ChunkLoadError",d.type=i,d.request=a,n[1](d)}s[e]=void 0}};var l=setTimeout((function(){o({type:"timeout",target:c})}),12e4);c.onerror=c.onload=o,document.head.appendChild(c)}return Promise.all(t)},a.m=e,a.c=n,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)a.d(n,s,function(t){return e[t]}.bind(null,s));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a.oe=function(e){throw console.error(e),e};var r=window.webpackJsonp=window.webpackJsonp||[],o=r.push.bind(r);r.push=t,r=r.slice();for(var c=0;c<r.length;c++)t(r[c]);var d=o,l=a(a.s=1);t([[],{},0,[0]])}([function(e,t,n){var s;s=function(){return function(e){var t={};function n(s){if(t[s])return t[s].exports;var i=t[s]={i:s,l:!1,exports:{}};return e[s].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,s){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(n.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(s,i,function(t){return e[t]}.bind(null,i));return s},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=9)}([function(e,t,n){e.exports=n(13)},function(e,t){e.exports=!1},function(e,t){function n(e,t,n,s,i,a,r){try{var o=e[a](r),c=o.value}catch(e){return void n(e)}o.done?t(c):Promise.resolve(c).then(s,i)}e.exports=function(e){return function(){var t=this,s=arguments;return new Promise((function(i,a){var r=e.apply(t,s);function o(e){n(r,i,a,o,c,"next",e)}function c(e){n(r,i,a,o,c,"throw",e)}o(void 0)}))}}},function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}e.exports=function(e,t,s){return t&&n(e.prototype,t),s&&n(e,s),e}},function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(t){return"function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?e.exports=s=function(e){return n(e)}:e.exports=s=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":n(e)},s(t)}e.exports=s},function(e,t,n){var s=n(10),i=n(11),a=n(12);e.exports=function(e,t){return s(e)||i(e,t)||a()}},function(e,t,n){e.exports=function(){return new Worker(n.p+"2380cfa0e562e148fa50.worker.js")}},function(e,t,n){var s=n(15),i=n(16);e.exports=function(e,t,n){var a=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var r=(e=e||{}).random||(e.rng||s)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t)for(var o=0;o<16;++o)t[a+o]=r[o];return t||i(r)}},function(e,t,n){e.exports=n(17)},function(e,t){e.exports=function(e){if(Array.isArray(e))return e}},function(e,t){e.exports=function(e,t){var n=[],s=!0,i=!1,a=void 0;try{for(var r,o=e[Symbol.iterator]();!(s=(r=o.next()).done)&&(n.push(r.value),!t||n.length!==t);s=!0);}catch(e){i=!0,a=e}finally{try{s||null==o.return||o.return()}finally{if(i)throw a}}return n}},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}},function(e,t,n){var s=function(e){"use strict";var t,n=Object.prototype,s=n.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",r=i.asyncIterator||"@@asyncIterator",o=i.toStringTag||"@@toStringTag";function c(e,t,n,s){var i=t&&t.prototype instanceof m?t:m,a=Object.create(i.prototype),r=new M(s||[]);return a._invoke=function(e,t,n){var s=l;return function(i,a){if(s===u)throw new Error("Generator is already running");if(s===p){if("throw"===i)throw a;return T()}for(n.method=i,n.arg=a;;){var r=n.delegate;if(r){var o=L(r,n);if(o){if(o===g)continue;return o}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(s===l)throw s=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);s=u;var c=d(e,t,n);if("normal"===c.type){if(s=n.done?p:h,c.arg===g)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(s=p,n.method="throw",n.arg=c.arg)}}}(e,n,r),a}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var l="suspendedStart",h="suspendedYield",u="executing",p="completed",g={};function m(){}function f(){}function b(){}var v={};v[a]=function(){return this};var x=Object.getPrototypeOf,y=x&&x(x(E([])));y&&y!==n&&s.call(y,a)&&(v=y);var w=b.prototype=m.prototype=Object.create(v);function k(e){["next","throw","return"].forEach((function(t){e[t]=function(e){return this._invoke(t,e)}}))}function C(e){var t;this._invoke=function(n,i){function a(){return new Promise((function(t,a){!function t(n,i,a,r){var o=d(e[n],e,i);if("throw"!==o.type){var c=o.arg,l=c.value;return l&&"object"==typeof l&&s.call(l,"__await")?Promise.resolve(l.__await).then((function(e){t("next",e,a,r)}),(function(e){t("throw",e,a,r)})):Promise.resolve(l).then((function(e){c.value=e,a(c)}),(function(e){return t("throw",e,a,r)}))}r(o.arg)}(n,i,t,a)}))}return t=t?t.then(a,a):a()}}function L(e,n){var s=e.iterator[n.method];if(s===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,L(e,n),"throw"===n.method))return g;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return g}var i=d(s,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,g;var a=i.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,g):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function _(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function M(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function E(e){if(e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,r=function n(){for(;++i<e.length;)if(s.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return r.next=r}}return{next:T}}function T(){return{value:t,done:!0}}return f.prototype=w.constructor=b,b.constructor=f,b[o]=f.displayName="GeneratorFunction",e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,o in e||(e[o]="GeneratorFunction")),e.prototype=Object.create(w),e},e.awrap=function(e){return{__await:e}},k(C.prototype),C.prototype[r]=function(){return this},e.AsyncIterator=C,e.async=function(t,n,s,i){var a=new C(c(t,n,s,i));return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},k(w),w[o]="Generator",w[a]=function(){return this},w.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var s=t.pop();if(s in e)return n.value=s,n.done=!1,n}return n.done=!0,n}},e.values=E,M.prototype={constructor:M,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(_),!e)for(var n in this)"t"===n.charAt(0)&&s.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(s,i){return o.type="throw",o.arg=e,n.next=s,i&&(n.method="next",n.arg=t),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var r=this.tryEntries[a],o=r.completion;if("root"===r.tryLoc)return i("end");if(r.tryLoc<=this.prev){var c=s.call(r,"catchLoc"),d=s.call(r,"finallyLoc");if(c&&d){if(this.prev<r.catchLoc)return i(r.catchLoc,!0);if(this.prev<r.finallyLoc)return i(r.finallyLoc)}else if(c){if(this.prev<r.catchLoc)return i(r.catchLoc,!0)}else{if(!d)throw new Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return i(r.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&s.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var r=a?a.completion:{};return r.type=e,r.arg=t,a?(this.method="next",this.next=a.finallyLoc,g):this.complete(r)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),_(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var s=n.completion;if("throw"===s.type){var i=s.arg;_(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,s){return this.delegate={iterator:E(e),resultName:n,nextLoc:s},"next"===this.method&&(this.arg=t),g}},e}(e.exports);try{regeneratorRuntime=s}catch(e){Function("r","regeneratorRuntime = r")(s)}},function(e,t){},function(e,t){var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(n){var s=new Uint8Array(16);e.exports=function(){return n(s),s}}else{var i=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),i[t]=e>>>((3&t)<<3)&255;return i}}},function(e,t){for(var n=[],s=0;s<256;++s)n[s]=(s+256).toString(16).substr(1);e.exports=function(e,t){var s=t||0,i=n;return[i[e[s++]],i[e[s++]],i[e[s++]],i[e[s++]],"-",i[e[s++]],i[e[s++]],"-",i[e[s++]],i[e[s++]],"-",i[e[s++]],i[e[s++]],"-",i[e[s++]],i[e[s++]],i[e[s++]],i[e[s++]],i[e[s++]],i[e[s++]]].join("")}},function(e,t,n){"use strict";n.r(t);var s=n(5),i=n.n(s),a=n(6),r=n.n(a),o=n(0),c=n.n(o),d=n(2),l=n.n(d),h=n(3),u=n.n(h),p=n(4),g=n.n(p),m=n(7),f=n.n(m);function b(e){return e||(e=0),new Promise((function(t){return setTimeout(t,e)}))}function v(e){e||(e=5);for(var t="",n="abcdefghijklmnopqrstuvwxzy0123456789",s=0;s<e;s++)t+=n.charAt(Math.floor(Math.random()*n.length));return t}var x=0,y=0;function w(){var e=(new Date).getTime();return e===x?1e3*e+ ++y:(x=e,y=0,1e3*e)}var k=n(1),C=n.n(k),L={create:function(e){var t={messagesCallback:null,bc:new BroadcastChannel(e),subFns:[]};return t.bc.onmessage=function(e){t.messagesCallback&&t.messagesCallback(e.data)},t},close:function(e){e.bc.close(),e.subFns=[]},onMessage:function(e,t,n){e.messagesCallbackTime=n,e.messagesCallback=t},postMessage:function(e,t){e.bc.postMessage(t,!1)},canBeUsed:function(){if(C.a&&"undefined"==typeof window)return!1;if("function"==typeof BroadcastChannel){if(BroadcastChannel._pubkey)throw new Error("BroadcastChannel: Do not overwrite window.BroadcastChannel with this module, this is not a polyfill");return!0}return!1},type:"native",averageResponseTime:function(){return 100},microSeconds:w},S=function(e){this.ttl=e,this.set=new Set,this.timeMap=new Map,this.has=this.set.has.bind(this.set)};function _(){return(new Date).getTime()}S.prototype={add:function(e){this.timeMap.set(e,_()),this.set.add(e),function(e){for(var t=_()-e.ttl,n=e.set[Symbol.iterator]();;){var s=n.next().value;if(!s)return;if(!(e.timeMap.get(s)<t))return;e.timeMap.delete(s),e.set.delete(s)}}(this)},clear:function(){this.set.clear(),this.timeMap.clear()}};var M=S;function E(e){return e||(e={}),void 0===(e=JSON.parse(JSON.stringify(e))).webWorkerSupport&&(e.webWorkerSupport=!0),e.idb||(e.idb={}),e.idb.ttl||(e.idb.ttl=45e3),e.idb.fallbackInterval||(e.idb.fallbackInterval=150),e.localstorage||(e.localstorage={}),e.localstorage.removeTimeout||(e.localstorage.removeTimeout=6e4),e.node||(e.node={}),e.node.ttl||(e.node.ttl=12e4),void 0===e.node.useFastPath&&(e.node.useFastPath=!0),e}var T="pubkey.broadcast-channel-0-",P="messages";function I(){return"undefined"!=typeof indexedDB?indexedDB:void 0!==window.mozIndexedDB?window.mozIndexedDB:void 0!==window.webkitIndexedDB?window.webkitIndexedDB:void 0!==window.msIndexedDB&&window.msIndexedDB}function O(e,t){return function(e,t){var n=(new Date).getTime()-t,s=e.transaction(P).objectStore(P),i=[];return new Promise((function(e){s.openCursor().onsuccess=function(t){var s=t.target.result;if(s){var a=s.value;if(!(a.time<n))return void e(i);i.push(a),s.continue()}else e(i)}}))}(e,t).then((function(t){return Promise.all(t.map((function(t){return function(e,t){var n=e.transaction([P],"readwrite").objectStore(P).delete(t);return new Promise((function(e){n.onsuccess=function(){return e()}}))}(e,t.id)})))}))}function A(e){return e.closed?Promise.resolve():e.messagesCallback?(t=e.db,n=e.lastCursorId,s=t.transaction(P).objectStore(P),i=[],a=IDBKeyRange.bound(n+1,1/0),new Promise((function(e){s.openCursor(a).onsuccess=function(t){var n=t.target.result;n?(i.push(n.value),n.continue()):e(i)}}))).then((function(t){return t.map((function(t){return t.id>e.lastCursorId&&(e.lastCursorId=t.id),t})).filter((function(t){return function(e,t){return!(e.uuid===t.uuid||t.eMIs.has(e.id)||e.data.time<t.messagesCallbackTime)}(t,e)})).sort((function(e,t){return e.time-t.time})).forEach((function(t){e.messagesCallback&&(e.eMIs.add(t.id),e.messagesCallback(t.data))})),Promise.resolve()})):Promise.resolve();var t,n,s,i,a}var N="pubkey.broadcastChannel-";function F(e){return N+e}function D(){return!C.a&&!!function(){var e;if("undefined"==typeof window)return null;try{e=window.localStorage,e=window["ie8-eventlistener/storage"]||window.localStorage}catch(e){}return e}()}var z=[L,{create:function(e,t){return t=E(t),function(e){var t=I(),n=T+e,s=t.open(n,1);return s.onupgradeneeded=function(e){e.target.result.createObjectStore(P,{keyPath:"id",autoIncrement:!0})},new Promise((function(e,t){s.onerror=function(e){return t(e)},s.onsuccess=function(){e(s.result)}}))}(e).then((function(n){var s={closed:!1,lastCursorId:0,channelName:e,options:t,uuid:v(10),eMIs:new M(2*t.idb.ttl),writeBlockPromise:Promise.resolve(),messagesCallback:null,readQueuePromises:[],db:n};return function e(t){if(!t.closed)return A(t).then((function(){return b(t.options.idb.fallbackInterval)})).then((function(){return e(t)}))}(s),s}))},close:function(e){e.closed=!0,e.db.close()},onMessage:function(e,t,n){e.messagesCallbackTime=n,e.messagesCallback=t,A(e)},postMessage:function(e,t){return e.writeBlockPromise=e.writeBlockPromise.then((function(){return function(e,t,n){var s={uuid:t,time:(new Date).getTime(),data:n},i=e.transaction([P],"readwrite");return new Promise((function(e,t){i.oncomplete=function(){return e()},i.onerror=function(e){return t(e)},i.objectStore(P).add(s)}))}(e.db,e.uuid,t)})).then((function(){var t,n;0===(t=0,n=10,Math.floor(Math.random()*(n-t+1)+t))&&O(e.db,e.options.idb.ttl)})),e.writeBlockPromise},canBeUsed:function(){return!C.a&&!!I()},type:"idb",averageResponseTime:function(e){return 2*e.idb.fallbackInterval},microSeconds:w},{create:function(e,t){if(t=E(t),!D())throw new Error("BroadcastChannel: localstorage cannot be used");var n=v(10),s=new M(t.localstorage.removeTimeout),i={channelName:e,uuid:n,eMIs:s};return i.listener=function(e,t){var n=F(e),s=function(e){e.key===n&&t(JSON.parse(e.newValue))};return window.addEventListener("storage",s),s}(e,(function(e){i.messagesCallback&&e.uuid!==n&&e.token&&!s.has(e.token)&&(e.data.time&&e.data.time<i.messagesCallbackTime||(s.add(e.token),i.messagesCallback(e.data)))})),i},close:function(e){var t;t=e.listener,window.removeEventListener("storage",t)},onMessage:function(e,t,n){e.messagesCallbackTime=n,e.messagesCallback=t},postMessage:function(e,t){return new Promise((function(n){b().then((function(){var s=F(e.channelName),i={token:v(10),time:(new Date).getTime(),data:t,uuid:e.uuid},a=JSON.stringify(i);localStorage.setItem(s,a);var r=document.createEvent("Event");r.initEvent("storage",!0,!0),r.key=s,r.newValue=a,window.dispatchEvent(r),n()}))}))},canBeUsed:D,type:"localstorage",averageResponseTime:function(){return 120},microSeconds:w}];if(C.a){var B=n(14);"function"==typeof B.canBeUsed&&z.push(B)}function W(e){if(e.type){var t=z.find((function(t){return t.type===e.type}));if(t)return t;throw new Error("method-type "+e.type+" not found")}var n=z;e.webWorkerSupport||C.a||(n=z.filter((function(e){return"idb"!==e.type})));var s=n.find((function(e){return e.canBeUsed()}));if(s)return s;throw new Error("No useable methode found:"+JSON.stringify(z.map((function(e){return e.type}))))}var U=function(e,t){var n,s,i;this.name=e,this.options=E(t),this.method=W(this.options),this._iL=!1,this._onML=null,this._addEL={message:[],internal:[]},this._befC=[],this._prepP=null,s=(n=this).method.create(n.name,n.options),(i=s)&&"function"==typeof i.then?(n._prepP=s,s.then((function(e){n._state=e}))):n._state=s};function R(e,t,n){var s={time:e.method.microSeconds(),type:t,data:n};return(e._prepP?e._prepP:Promise.resolve()).then((function(){return e.method.postMessage(e._state,s)}))}function H(e){return e._addEL.message.length>0||e._addEL.internal.length>0}function G(e,t,n){e._addEL[t].push(n),function(e){if(!e._iL&&H(e)){var t=function(t){e._addEL[t.type].forEach((function(e){t.time>=e.time&&e.fn(t.data)}))},n=e.method.microSeconds();e._prepP?e._prepP.then((function(){e._iL=!0,e.method.onMessage(e._state,t,n)})):(e._iL=!0,e.method.onMessage(e._state,t,n))}}(e)}function j(e,t,n){e._addEL[t]=e._addEL[t].filter((function(e){return e!==n})),function(e){if(e._iL&&!H(e)){e._iL=!1;var t=e.method.microSeconds();e.method.onMessage(e._state,null,t)}}(e)}U._pubkey=!0,U.clearNodeFolder=function(e){var t=W(e=E(e));return"node"===t.type?t.clearNodeFolder().then((function(){return!0})):Promise.resolve(!1)},U.prototype={postMessage:function(e){if(this.closed)throw new Error("BroadcastChannel.postMessage(): Cannot post message after channel has closed");return R(this,"message",e)},postInternal:function(e){return R(this,"internal",e)},set onmessage(e){var t={time:this.method.microSeconds(),fn:e};j(this,"message",this._onML),e&&"function"==typeof e?(this._onML=t,G(this,"message",t)):this._onML=null},addEventListener:function(e,t){G(this,e,{time:this.method.microSeconds(),fn:t})},removeEventListener:function(e,t){j(this,e,this._addEL[e].find((function(e){return e.fn===t})))},close:function(){var e=this;if(!this.closed){this.closed=!0;var t=this._prepP?this._prepP:Promise.resolve();return this._onML=null,this._addEL.message=[],t.then((function(){return Promise.all(e._befC.map((function(e){return e()})))})).then((function(){return e.method.close(e._state)}))}},get type(){return this.method.type}};var V=U,J=n(8),K=n.n(J),Y=new(function(){function e(){u()(this,e),this.setVerbosity("WARNING")}return g()(e,[{key:"debug",value:function(){var e;this.checkVerbosity(4)&&(e=console).log.apply(e,arguments)}},{key:"log",value:function(){var e;this.checkVerbosity(4)&&(e=console).log.apply(e,arguments)}},{key:"info",value:function(){var e;this.checkVerbosity(3)&&(e=console).info.apply(e,arguments)}},{key:"warn",value:function(){var e;this.checkVerbosity(2)&&(e=console).warn.apply(e,arguments)}},{key:"error",value:function(){var e;this.checkVerbosity(1)&&(e=console).error.apply(e,arguments)}},{key:"setVerbosity",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info";void 0===e&&(e=t),"string"==typeof e&&(e={ERROR:1,WARNING:2,INFO:3,LOG:4,DEBUG:4}[e.toUpperCase()]||2),this.level=e}},{key:"checkVerbosity",value:function(e){return this.level>=e}}]),e}()),q=function(e){return new Promise((function(t){return setTimeout(t,e)}))},Z=function(){function e(t){var n=this;u()(this,e),Y.setVerbosity(t.jsLogVerbosityLevel),this.worker=new f.a,this.worker.onmessage=function(e){n.onResponse(e.data)},this.query_id=0,this.query_callbacks=new Map,"onUpdate"in t&&(this.onUpdate=t.onUpdate,delete t.onUpdate),t.instanceName=t.instanceName||"tdlib",this.fileManager=new X(t.instanceName,this),this.worker.postMessage({"@type":"init",options:t}),this.closeOtherClients(t)}var t,n,s;return g()(e,[{key:"send",value:function(e){return this.doSend(e,!0)}},{key:"sendInternal",value:function(e){return this.doSend(e,!1)}},{key:"doSend",value:function(e,t){var n=this;this.query_id++,e["@extra"]?e["@extra"]={"@old_extra":JSON.parse(JSON.stringify(e["@extra"])),query_id:this.query_id}:e["@extra"]={query_id:this.query_id},"setJsLogVerbosityLevel"===e["@type"]&&Y.setVerbosity(e.new_verbosity_level),Y.debug("send to worker: ",e);var s=new Promise((function(e,t){n.query_callbacks.set(n.query_id,[e,t])}));return t?this.externalPostMessage(e):this.worker.postMessage(e),s}},{key:"externalPostMessage",value:function(e){["getStorageStatistics","getStorageStatisticsFast","optimizeStorage","addProxy","init","start"].includes(e["@type"])?this.onResponse({"@type":"error","@extra":e["@extra"],code:400,message:"Method '"+e["@type"]+"' is not supported"}):"readFile"!==e["@type"]&&"readFilePart"!==e["@type"]?"deleteFile"!==e["@type"]?this.worker.postMessage(e):this.deleteFile(e):this.readFile(e)}},{key:"readFile",value:(s=l()(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fileManager.readFile(t);case 2:n=e.sent,this.onResponse(n);case 4:case"end":return e.stop()}}),e,this)}))),function(e){return s.apply(this,arguments)})},{key:"deleteFile",value:(n=l()(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.fileManager.deleteFile(t),e.prev=1,!n.idb_key){e.next=6;break}return e.next=5,this.sendInternal({"@type":"deleteIdbKey",idb_key:n.idb_key});case 5:delete n.idb_key;case 6:return e.next=8,this.sendInternal({"@type":"deleteFile",file_id:t.file_id});case 8:e.next=12;break;case 10:e.prev=10,e.t0=e.catch(1);case 12:this.onResponse(n);case 13:case"end":return e.stop()}}),e,this,[[1,10]])}))),function(e){return n.apply(this,arguments)})},{key:"onResponse",value:function(e){if(Y.debug("receive from worker: ",JSON.parse(JSON.stringify(e,(function(e,t){if("arr"!==e)return t})))),"@extra"in(e=this.prepareResponse(e))){var t=e["@extra"].query_id,n=this.query_callbacks.get(t),s=r()(n,2),i=s[0],a=s[1];this.query_callbacks.delete(t),"@old_extra"in e["@extra"]&&(e["@extra"]=e["@extra"]["@old_extra"]),i&&("error"===e["@type"]?a(e):i(e))}else{if("inited"===e["@type"])return void this.onInited();if("fsInited"===e["@type"])return void this.onFsInited();"updateAuthorizationState"===e["@type"]&&"authorizationStateClosed"===e.authorization_state["@type"]&&this.onClosed(),this.onUpdate(e)}}},{key:"prepareFile",value:function(e){return this.fileManager.registerFile(e)}},{key:"prepareResponse",value:function(e){if("file"===e["@type"])return this.prepareFile(e);for(var t in e){var n=e[t];n&&"object"===i()(n)&&(e[t]=this.prepareResponse(n))}return e}},{key:"onBroadcastMessage",value:function(e){var t=e;if(t.uid!==this.uid){if(Y.info("got broadcast message: ",t),t.isBackground&&!this.isBackground);else if(!t.isBackground&&this.isBackground||t.timestamp>this.timestamp)return void this.close();"closed"===t.state?(this.waitSet.delete(t.uid),0===this.waitSet.size&&(Y.info("onWaitSetEmpty"),this.onWaitSetEmpty(),this.onWaitSetEmpty=function(){})):(this.waitSet.add(t.uid),"closing"!==t.state&&this.postState())}else Y.info("ignore self broadcast message: ",t)}},{key:"postState",value:function(){var e={uid:this.uid,state:this.state,timestamp:this.timestamp,isBackground:this.isBackground};Y.info("Post state: ",e),this.channel.postMessage(e)}},{key:"onWaitSetEmpty",value:function(){}},{key:"onFsInited",value:function(){this.fileManager.init()}},{key:"onInited",value:function(){this.isInited=!0,this.doSendStart()}},{key:"sendStart",value:function(){this.wantSendStart=!0,this.doSendStart()}},{key:"doSendStart",value:function(){if(this.isInited&&this.wantSendStart&&"start"===this.state){this.wantSendStart=!1,this.state="active";var e={"@type":"start"};Y.info("send to worker: ",e),this.worker.postMessage(e)}}},{key:"onClosed",value:function(){this.isClosing=!0,this.worker.terminate(),Y.info("worker is terminated"),this.state="closed",this.postState()}},{key:"close",value:function(){if(!this.isClosing){if(this.isClosing=!0,Y.info("close state: ",this.state),"start"===this.state)return this.onClosed(),void this.onUpdate({"@type":"updateAuthorizationState",authorization_state:{"@type":"authorizationStateClosed"}});var e={"@type":"close"};Y.info("send to worker: ",e),this.worker.postMessage(e),this.state="closing",this.postState()}}},{key:"closeOtherClients",value:(t=l()(c.a.mark((function e(t){var n=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.uid=K()(),this.state="start",this.isBackground=!!t.isBackground,this.timestamp=Date.now(),this.waitSet=new Set,Y.info("close other clients"),this.channel=new V(t.instanceName,{webWorkerSupport:!1}),this.postState(),this.channel.onmessage=function(e){n.onBroadcastMessage(e)},e.next=11,q(300);case 11:if(0===this.waitSet.size){e.next=14;break}return e.next=14,new Promise((function(e){n.onWaitSetEmpty=e}));case 14:this.sendStart();case 15:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"onUpdate",value:function(e){Y.info("ignore onUpdate")}}]),e}(),$=function(){function e(t){u()(this,e),this.value=t,this.clear()}return g()(e,[{key:"erase",value:function(){this.prev.connect(this.next),this.clear()}},{key:"clear",value:function(){this.prev=this,this.next=this}},{key:"connect",value:function(e){this.next=e,e.prev=this}},{key:"onUsed",value:function(e){e.usedAt=Date.now(),e.erase(),e.connect(this.next),Y.debug("LRU: used file_id: ",e.value),this.connect(e)}},{key:"getLru",value:function(){if(this===this.next)throw new Error("popLru from empty list");return this.prev}}]),e}(),X=function(){function e(t,n){u()(this,e),this.instanceName=t,this.cache=new Map,this.pending=[],this.transaction_id=0,this.totalSize=0,this.lru=new $(-1),this.client=n}var t,n,s,i;return g()(e,[{key:"init",value:function(){var e=this;this.idb=new Promise((function(t,n){var s=window.indexedDB.open(e.instanceName);s.onsuccess=function(){return t(s.result)},s.onerror=function(){return n(s.error)}})),this.isInited=!0}},{key:"unload",value:function(e){e.arr&&(Y.debug("LRU: delete file_id: ",e.node.value," with arr.length: ",e.arr.length),this.totalSize-=e.arr.length,delete e.arr),e.node&&(e.node.erase(),delete e.node)}},{key:"registerFile",value:function(e){e.idb_key||e.arr?e.local.is_downloading_completed=!0:e.local.is_downloading_completed=!1;var t={},n=this.cache.get(e.id);if(n?t=n:this.cache.set(e.id,t),e.idb_key?(t.idb_key=e.idb_key,delete e.idb_key):delete t.idb_key,e.arr){for(var s=Date.now();this.totalSize>1e8;){var i=this.lru.getLru();if(i.usedAt+6e4>s)break;var a=this.cache.get(i.value);this.unload(a)}t.arr&&(Y.warn("Got file.arr at least twice for the same file"),this.totalSize-=t.arr.length),t.arr=e.arr,delete e.arr,this.totalSize+=t.arr.length,t.node||(Y.debug("LRU: create file_id: ",e.id," with arr.length: ",t.arr.length),t.node=new $(e.id)),this.lru.onUsed(t.node),Y.info("Total file.arr size: ",this.totalSize)}return t.file=e,e}},{key:"flushLoad",value:(i=l()(c.a.mark((function e(){var t,n,s,i,a,r,o,d,l,h;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.pending,this.pending=[],e.next=4,this.idb;case 4:for(n=e.sent,s=this.transaction_id++,i=n.transaction(["keyvaluepairs"],"readonly").objectStore("keyvaluepairs"),Y.debug("Load group of files from idb",t.length),a=!0,r=!1,o=void 0,e.prev=11,d=function(){var e=h.value,t=i.get(e.key);t.onsuccess=function(t){var n=t.target.result;n?(0===n.size&&Y.error("Got empty blob from db ",e.key),e.resolve({data:n,transaction_id:s})):e.reject()},t.onerror=function(){return e.reject(t.error)}},l=t[Symbol.iterator]();!(a=(h=l.next()).done);a=!0)d();e.next=20;break;case 16:e.prev=16,e.t0=e.catch(11),r=!0,o=e.t0;case 20:e.prev=20,e.prev=21,a||null==l.return||l.return();case 23:if(e.prev=23,!r){e.next=26;break}throw o;case 26:return e.finish(23);case 27:return e.finish(20);case 28:case"end":return e.stop()}}),e,this,[[11,16,20,28],[21,,23,27]])}))),function(){return i.apply(this,arguments)})},{key:"load",value:function(e,t,n){var s=this;0===this.pending.length&&setTimeout((function(){s.flushLoad()}),1),this.pending.push({key:e,resolve:t,reject:n})}},{key:"doLoadFull",value:(s=l()(c.a.mark((function e(t){var n,s=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.arr){e.next=2;break}return e.abrupt("return",{data:new Blob([t.arr]),transaction_id:-1});case 2:if(!t.idb_key){e.next=7;break}return n=t.idb_key,e.next=6,new Promise((function(e,t){s.load(n,e,t)}));case 6:return e.abrupt("return",e.sent);case 7:throw new Error("File is not loaded");case 8:case"end":return e.stop()}}),e)}))),function(e){return s.apply(this,arguments)})},{key:"doLoad",value:(n=l()(c.a.mark((function e(t,n,s){var i,a,r,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.arr||t.idb_key||!t.file.local.path){e.next=24;break}return e.prev=1,e.next=4,this.client.sendInternal({"@type":"getFileDownloadedPrefixSize",file_id:t.file.id,offset:n});case 4:if(i=e.sent,Y.error(i,s),s){e.next=10;break}s=i.count,e.next=12;break;case 10:if(!(s>i.count)){e.next=12;break}throw new Error("File not loaded yet");case 12:return e.next=14,this.client.sendInternal({"@type":"readFilePart",path:t.file.local.path,offset:n,size:s});case 14:return(a=e.sent).data=new Blob([a.data]),a.transaction_id=-2,Y.error(a),e.abrupt("return",a);case 21:e.prev=21,e.t0=e.catch(1),Y.info("readFilePart failed",t,n,s,e.t0);case 24:return e.next=26,this.doLoadFull(t);case 26:return r=e.sent,o=r.data.size,s||(s=o),n>o&&(n=o),r.data=r.data.slice(n,n+s),e.abrupt("return",r);case 32:case"end":return e.stop()}}),e,this,[[1,21]])}))),function(e,t,s){return n.apply(this,arguments)})},{key:"doDelete",value:function(e){return this.unload(e),e.idb_key}},{key:"readFile",value:(t=l()(c.a.mark((function e(t){var n,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,this.isInited){e.next=3;break}throw new Error("FileManager is not inited");case 3:if(n=this.cache.get(t.file_id)){e.next=6;break}throw new Error("File is not loaded");case 6:return n.node&&this.lru.onUsed(n.node),t.offset=t.offset||0,t.size=t.size||0,e.next=11,this.doLoad(n,t.offset,t.size);case 11:return s=e.sent,e.abrupt("return",{"@type":"filePart","@extra":t["@extra"],data:s.data,transaction_id:s.transaction_id});case 15:return e.prev=15,e.t0=e.catch(0),e.abrupt("return",{"@type":"error","@extra":t["@extra"],code:400,message:e.t0});case 18:case"end":return e.stop()}}),e,this,[[0,15]])}))),function(e){return t.apply(this,arguments)})},{key:"deleteFile",value:function(e){var t={"@type":"ok","@extra":e["@extra"]};try{if(!this.isInited)throw new Error("FileManager is not inited");var n=this.cache.get(e.file_id);if(!n)throw new Error("File is not loaded");var s=this.doDelete(n);s&&(t.idb_key=s)}catch(e){}return t}}]),e}();t.default=Z}])},e.exports=s()},function(e,t,n){"use strict";n.r(t);var s,i=n(0),a=n.n(i);class r{constructor(e){this["@type"]=e}}class o extends r{constructor(e){super(),this["@type"]="setTdlibParameters",this.parameters=e}}class c extends r{constructor(){super(),this["@type"]="checkDatabaseEncryptionKey"}}class d extends r{constructor(e){super(),this["@type"]="setAuthenticationPhoneNumber",this.phone_number=e}}!function(e){e.SelectedBackground="updateSelectedBackground",e.AuthorizationState="updateAuthorizationState",e.ConnectionState="updateConnectionState",e.Option="updateOption",e.NewMessage="updateNewMessage",e.UserStatus="updateUserStatus",e.ScopeNotificationSettings="updateScopeNotificationSettings",e.HavePendingNotifications="updateHavePendingNotifications",e.ChatReadOutbox="updateChatReadOutbox",e.ChatReadInbox="updateChatReadInbox",e.ChatDraftMessage="updateChatDraftMessage",e.User="updateUser",e.NewChat="updateNewChat",e.ChatNotificationSettings="updateChatNotificationSettings",e.ChatLastMessage="updateChatLastMessage",e.ChatOrder="updateChatOrder",e.UserFullInfo="updateUserFullInfo",e.Ok="ok",e.Supergroup="updateSupergroup",e.BasicGroup="updateBasicGroup",e.SupergroupFullInfo="updateSupergroupFullInfo",e.UnreadMessageCount="updateUnreadMessageCount",e.UnreadChatCount="updateUnreadChatCount",e.UserChatAction="updateUserChatAction",e.MessageViews="updateMessageViews",e.DeleteMessages="updateDeleteMessages",e.File="updateFile",e.MessageSendSucceeded="updateMessageSendSucceeded",e.MessageContent="updateMessageContent",e.MessageEdited="updateMessageEdited",e.BasicGroupFullInfo="updateBasicGroupFullInfo"}(s||(s={}));class l extends r{constructor(e){super(),this["@type"]="checkAuthenticationCode",this.code=e}}class h extends r{constructor(e){super(),this["@type"]="checkAuthenticationPassword",this.password=e}}const u={default_offset_order:"9223372036854775807"};class p extends r{constructor(e,t,n=u.default_offset_order){super("getChats"),this.limit=t,this.offset_chat_id=e,this.offset_order=n}}class g{constructor(){this.listeners=[]}set value(e){this._value=e,this.listeners.forEach(t=>t(e))}get value(){return this._value}subscribe(e){this.listeners.push(e)}}class m extends r{constructor(){super(),this["@type"]="logOut"}}class f extends r{constructor(e,t,n=20,s=0,i=!1){super("getChatHistory"),this.chat_id=e,this.from_message_id=t,this.offset=s,this.limit=n,this.only_local=i}}class b extends r{constructor(e,t,n=0,s=!1,i=!1,a=null){super("sendMessage"),this.chat_id=e,this.reply_to_message_id=n,this.disable_notification=s,this.from_background=i,this.reply_markup=a,this.input_message_content=t}}const v=new g;class x extends r{constructor(e,t){super(t||"messageText"),this.text=e}}class y extends x{constructor(e,t=!0,n=!1){super(e,"inputMessageText"),this.disable_web_page_preview=t,this.clear_draft=n,this.text=e}}class w extends r{constructor(e,t=null){super("formattedText"),this.text=e,this.entities=t}}class k extends r{constructor(e,t=1){super("downloadFile"),this.file_id=e,this.priority=t}}const C=new class{constructor(){this.files={}}add(e,t){const n=new g;n.value=e,n.subscribe(t),this.files[e.id]=n}updateLocal(e){this.files[e.id].value=e}};class L extends r{constructor(e){super("readFile"),this.file_id=e}}class S extends r{constructor(e,t){super("registerUser"),this.first_name=e,this.last_name=t}}const _="c40e75a81fffbfdd49003a7e3cfd6eb9";class M{constructor(){this.authState=new g,this.chatLastMessage=new g,this.chatOrder=new g,this.newChat=new g,this.messages=new g,this.sendSucceeded=new g,this.messageContent=new g,this.readOutbox=new g,this.createClient()}createClient(){this.client=new a.a({logVerbosityLevel:1,jsLogVerbosityLevel:1,mode:"wasm",prefix:"tdlib",readOnly:!1,isBackground:!1,useDatabase:!0,wasmUrl:"b4b0d61282108a31908dd6b2dbd7067b.wasm?_sw-precache=b4b0d61282108a31908dd6b2dbd7067b"}),this.setTdlibParameters(),this.client.onUpdate=e=>{switch(console.log("receive update",e),e["@type"]){case s.AuthorizationState:this.authState.value=e;break;case s.Option:case s.SelectedBackground:case s.ConnectionState:case s.NewMessage:case s.UserStatus:case s.ScopeNotificationSettings:case s.HavePendingNotifications:case s.User:break;case s.NewChat:this.newChat.value=e.chat;break;case s.ChatReadOutbox:this.readOutbox.value=e;break;case s.ChatReadInbox:case s.ChatDraftMessage:case s.ChatNotificationSettings:break;case s.ChatLastMessage:this.chatLastMessage.value=e;break;case s.ChatOrder:this.chatOrder.value=e;break;case s.UserFullInfo:case s.Ok:case s.Supergroup:case s.BasicGroup:case s.SupergroupFullInfo:case s.UnreadMessageCount:case s.UnreadChatCount:case s.UserChatAction:case s.MessageViews:case s.DeleteMessages:break;case s.File:C.updateLocal(e.file);break;case s.MessageSendSucceeded:this.sendSucceeded.value=e;break;case s.MessageContent:this.messageContent.value=e;break;case s.MessageEdited:case s.BasicGroupFullInfo:break;default:console.log("default")}}}send(e){return this.client.send(e)}setAuthenticationPhoneNumber(e){return this.send(new d(e))}checkAuthenticationCode(e){return this.send(new l(e))}checkAuthenticationPassword(e){return this.send(new h(e))}setTdlibParameters(){this.send(new o({"@type":"tdParameters",use_test_dc:!1,api_id:113369,api_hash:_,system_language_code:"en",device_model:M.getBrowser(),system_version:M.getOSName(),application_version:"0.0.0",use_secret_chats:!1,use_message_database:!0,use_file_database:!1,database_directory:"/db",files_directory:"/"}))}checkDatabaseEncryptionKey(){this.send(new c)}getChats(){this.send(new p(0,15))}appendChatHistory(e,t){return this.send(new f(e,t))}getChatHistory(e,t){this.send(new f(e,t.id)).then(e=>{e.messages.unshift(t),this.messages.value=e}).catch(e=>console.log("error: ",e))}logout(){this.send(new m)}sendMessage(e){const t=new y(new w(e));console.log(t),this.send(new b(v.value,t))}downloadFile(e){this.send(new k(e.id))}readFile(e){return this.send(new L(e))}registerUser(e,t){return this.send(new S(e,t))}static getOSName(){const e=navigator.userAgent;return-1!==e.indexOf("Windows NT 10.0")?"Windows 10":-1!==e.indexOf("Windows NT 6.2")?"Windows 8":-1!==e.indexOf("Windows NT 6.1")?"Windows 7":-1!==e.indexOf("Windows NT 6.0")?"Windows Vista":-1!==e.indexOf("Windows NT 5.1")?"Windows XP":-1!==e.indexOf("Windows NT 5.0")?"Windows 2000":-1!==e.indexOf("Mac")?"Mac/iOS":-1!==e.indexOf("X11")?"UNIX":-1!==e.indexOf("Linux")?"Linux":"Unknown"}static getBrowser(){let e="";const t=document.documentMode;let n=!/*@cc_on!@*/!!t&&!!window.styleMedia;return e=-1===navigator.userAgent.indexOf("Chrome")||n?-1===navigator.userAgent.indexOf("Safari")||n?-1!==navigator.userAgent.indexOf("Firefox")?"Firefox":-1!==navigator.userAgent.indexOf("MSIE")||!0==!!t?"IE":n?"Edge":"Unknown":"Safari":"Chrome"}}const E=new M;var T,P,I,O,A;!function(e){e.WaitEncryptionKey="authorizationStateWaitEncryptionKey",e.WaitPhoneNumber="authorizationStateWaitPhoneNumber",e.WaitCode="authorizationStateWaitCode",e.WaitRegistration="authorizationStateWaitRegistration",e.WaitPassword="authorizationStateWaitPassword",e.Ready="authorizationStateReady",e.Closed="authorizationStateClosed",e.LoggingOut="authorizationStateLoggingOut",e.WaitTdlibParameters="authorizationStateWaitTdlibParameters",e.Closing="authorizationStateClosing"}(T||(T={})),function(e){e[e.Sun=0]="Sun",e[e.Mon=1]="Mon",e[e.Tue=2]="Tue",e[e.Wed=3]="Wed",e[e.Thu=4]="Thu",e[e.Fri=5]="Fri",e[e.Sat=6]="Sat"}(P||(P={})),function(e){e[e.Jan=0]="Jan",e[e.Feb=1]="Feb",e[e.Mar=2]="Mar",e[e.Apr=3]="Apr",e[e.May=4]="May",e[e.Jun=5]="Jun",e[e.Jul=6]="Jul",e[e.Aug=7]="Aug",e[e.Sept=8]="Sept",e[e.Oct=9]="Oct",e[e.Nov=10]="Nov",e[e.Dec=11]="Dec"}(I||(I={})),function(e){e[e.Sunday=0]="Sunday",e[e.Monday=1]="Monday",e[e.Tuesday=2]="Tuesday",e[e.Wednesday=3]="Wednesday",e[e.Thursday=4]="Thursday",e[e.Friday=5]="Friday",e[e.Saturday=6]="Saturday"}(O||(O={})),function(e){e[e.January=0]="January",e[e.February=1]="February",e[e.March=2]="March",e[e.April=3]="April",e[e.May=4]="May",e[e.June=5]="June",e[e.July=6]="July",e[e.August=7]="August",e[e.September=8]="September",e[e.October=9]="October",e[e.November=10]="November",e[e.December=11]="December"}(A||(A={}));const N=86400,F=7*N;class D{static getTime(e){const t=new Date(1e3*e),n=new Date,s=n.getTime()/1e3-e;if(s>0){if(s<N){return t.getHours()+":"+("0"+t.getMinutes()).substr(-2)}if(s>=N&&s<F){const e=t.getDay();return P[e]}{const e=t.getDate(),s=t.getMonth(),i=t.getFullYear();return n.getFullYear()===i?e+" "+I[s]:e+"/"+s+"/"+i}}return""}static getTimeMessages(e){const t=new Date(1e3*e),n=new Date,s=n.getTime()/1e3,i=s-e;if(this.sameDate(s,e))return"Today";if(i>0){if(i<F){const e=t.getDay();return O[e]}{const e=t.getDate(),s=t.getMonth(),i=t.getFullYear();return n.getFullYear()===i?e+" "+A[s]:e+"/"+s+"/"+i}}return""}static getTimeMessage(e){const t=new Date(1e3*e);return t.getHours()+":"+("0"+t.getMinutes()).substr(-2)}static sameDate(e,t){const n=new Date(1e3*e),s=new Date(1e3*t);return n.getDate()===s.getDate()&&n.getMonth()===s.getMonth()&&n.getFullYear()===s.getFullYear()}static getTimestamp(){return(new Date).getTime()/1e3}}class z extends HTMLElement{constructor(e){super(),this.classList.add("chat-counter"),this.innerText=e.toString(),e<1&&(this.style.display="none")}}customElements.define("tg-chat-counter",z);class B extends HTMLElement{constructor(){super()}create(e="div"){return document.createElement(e)}show(){this.classList.remove("hide")}hide(){this.classList.add("hide")}hideWithStyle(){this.style.display="none"}showWithStyle(e){this.style.display=e}}class W extends B{constructor(e){super(),this.colors=["#cc90e2","#80d066","#ecd074","#6fb1e4","#e57979","#f98bae","#73cdd0","#fba76f"],e&&this.render(e)}render(e){const t=e.photo;t?(this.createImg(),this.setSrc(t)):(this.createCircle(),this.setInitials(e))}createImg(){this.img=this.create("img"),this.img.classList.add("chat-image"),this.appendChild(this.img)}createCircle(){this.letterCircle=this.create(),this.letterCircle.classList.add("letter-circle"),this.appendChild(this.letterCircle)}setSrc(e){this.img.src=e.small.local.path,C.add(e.small,e=>E.readFile(e.id).then(e=>this.img.src=URL.createObjectURL(e.data)).catch(e=>{})),E.downloadFile(e.small)}setInitials(e){this.letterCircle.style.backgroundColor=this.colors[Math.abs(e.type.user_id)%8],this.letterCircle.innerText=this.getInitials(e.title)}getInitials(e){const t=e.split(" "),n=t[1];return this.getLetter(t[0])+(n?this.getLetter(n):"")}getLetter(e){const t=e.charAt(0).toUpperCase();return t.toLowerCase()!==t?t:""}}var U,R;customElements.define("tg-chat-photo",W),function(e){e.Animation="messageAnimation",e.Audio="messageAudio",e.BasicGroupChatCreate="messageBasicGroupChatCreate",e.Call="messageCall",e.ChatAddMembers="messageChatAddMembers",e.ChatChangePhoto="messageChatChangePhoto",e.ChatChangeTitle="messageChatChangeTitle",e.ChatDeleteMember="messageChatDeleteMember",e.ChatDeletePhoto="messageChatDeletePhoto",e.ChatJoinByLink="messageChatJoinByLink",e.ChatSetTtl="messageChatSetTtl",e.ChatUpgradeFrom="messageChatUpgradeFrom",e.ChatUpgradeTo="messageChatUpgradeTo",e.Contact="messageContact",e.ContactRegistered="messageContactRegistered",e.CustomServiceAction="messageCustomServiceAction",e.Document="messageDocument",e.ExpiredPhoto="messageExpiredPhoto",e.ExpiredVideo="messageExpiredVideo",e.Game="messageGame",e.GameScore="messageGameScore",e.Invoice="messageInvoice",e.Location="messageLocation",e.PassportDataReceived="messagePassportDataReceived",e.PassportDataSent="messagePassportDataSent",e.PaymentSuccessful="messagePaymentSuccessful",e.PaymentSuccessfulBot="messagePaymentSuccessfulBot",e.Photo="messagePhoto",e.PinMessage="messagePinMessage",e.Poll="messagePoll",e.ScreenshotTaken="messageScreenshotTaken",e.Sticker="messageSticker",e.SupergroupChatCreate="messageSupergroupChatCreate",e.Text="messageText",e.Unsupported="messageUnsupported",e.Venue="messageVenue",e.Video="messageVideo",e.VideoNote="messageVideoNote",e.VoiceNote="messageVoiceNote",e.WebsiteConnected="messageWebsiteConnected"}(U||(U={})),function(e){e.One="assets/1check_svg.svg",e.Two="assets/2checks_svg.svg"}(R||(R={}));class H extends B{constructor(e){super(),this._message=e;const t=this.create();t.classList.add("tail"),this.appendChild(t);const n=document.createElement("div");n.classList.add("message-text"),this.appendChild(n),this.span=document.createElement("span"),this.span.classList.add("message-span"),this.span.innerText=H.getContent(e.content),n.appendChild(this.span);const s=document.createElement("div");s.classList.add("float-container"),n.appendChild(s);const i=document.createElement("div");i.innerText=D.getTimeMessage(e.date),i.classList.add("message-date"),s.appendChild(i),e.is_outgoing&&(this.img=document.createElement("img"),this.img.src=R.One,this.img.classList.add("check-img"),s.appendChild(this.img)),this.classList.add("message")}get message(){return this._message}set messageId(e){this._message.id=e}updateMessageContent(e){const t=e.text;t&&(this.span.innerText=t.text)}addCheckMark(e){const t=document.createElement("span");e.forEach(e=>t.classList.add(e)),this.checkContainer.appendChild(t)}readOutbox(){this.img.src=R.Two}readOutboxAnimate(){this.img.src=R.Two}addClasses(e,t){const n=this.classList;n.add(t?"my":"stranger"),e&&n.add("last")}static getContent(e){const t=e["@type"];let n="";switch(t){case U.Text:n=e.text.text;break;default:n="["+t.slice(7)+"]"}return n}}customElements.define("tg-message",H);class G extends HTMLElement{constructor(e){super(),this.chat=e,this.classList.add("chat"),this.appendChild(new W(e));const t=this.create();t.classList.add("chat-text"),this.appendChild(t);const n=this.create();n.classList.add("chat-top"),t.appendChild(n);const s=this.create();s.innerText=e.title,s.classList.add("chat-title"),n.appendChild(s),console.log("chat title: ",e.title),this.read=this.create(),this.read.classList.add("chat-read"),e.is_marked_as_unread&&(this.read.innerText="U"),n.appendChild(this.read);const i=this.create();i.classList.add("chat-bottom"),t.appendChild(i),this.message=this.create(),this.message.classList.add("chat-message"),i.appendChild(this.message);const a=new z(e.unread_count);i.appendChild(a)}create(e="div"){return document.createElement(e)}setLastMessage(e){this._lastMessage=e,this.message.innerText=H.getContent(e.content).replace(/\n/g," "),this.read.innerText=D.getTime(e.date)}get lastMessageId(){return this._lastMessage.id}get lastMessage(){return this._lastMessage}}customElements.define("tg-chat",G);const j=new g;class V extends HTMLElement{constructor(){super(),this.chats=new Map,this.eventListener=e=>this.getChatHistory(e),this.classList.add("chats"),this.css(),E.newChat.subscribe(e=>this.newChat(e)),E.chatLastMessage.subscribe(e=>this.updateChatLastMessage(e)),E.chatOrder.subscribe(e=>this.updateChatOrder(e)),E.readOutbox.subscribe(e=>this.updateChatReadOutbox(e)),E.getChats()}updateChatReadOutbox(e){this.chats.get(e.chat_id).chat.last_read_outbox_message_id=e.last_read_outbox_message_id}newChat(e){const t=new G(e);t.id=e.id.toString(),this.chats.set(e.id,t)}updateChatLastMessage(e){const t=this.chats.get(e.chat_id);t.setLastMessage(e.last_message),t.removeEventListener("click",this.eventListener),t.addEventListener("click",this.eventListener),"0"!==e.order&&this.updateChatOrder(e)}getChatHistory(e){const t=e.currentTarget,n=parseInt(t.id);if(v.value!==n){if(j.value=t.chat,v.value){this.chats.get(v.value).classList.remove("current-chat")}t.classList.add("current-chat"),v.value=n,E.getChatHistory(n,t.lastMessage)}}updateChatOrder(e){let t=document.getElementById(e.chat_id.toString());t?this.insertBefore(t,this.firstChild):this.appendChild(this.chats.get(e.chat_id))}css(){this.innerHTML="\n<style>\n    .chats {\n        width: 420px;\n        height: 100%;\n        overflow-y: auto;\n    }\n\n    .chat {\n        margin: 2px 2px 2px 8px;\n        padding: 8px 12px 8px 8px;\n        display: flex;\n        color: black;\n        border-radius: 8px;\n        font-size: 14px;\n        cursor: pointer;\n    }\n    \n    @-moz-document url-prefix() {\n        .chat {\n            margin-right: 8px;\n        }\n    }\n    \n    .chat:hover {\n        background-color: rgb(241, 243, 244);\n    }\n    \n    .current-chat {\n        background-color: rgb(244, 244, 245);\n    }\n\n    .chat-image, .letter-circle {\n        height: 54px;\n        width: 54px;\n        border-radius: 50%;\n        color: white;\n    }\n\n    .letter-circle {\n        text-align: center;\n        line-height: 54px;\n        font-size: 20px;\n    }\n\n    .chat-text {\n        position: relative;\n        margin-left: 10px;\n        width: 320px;\n    }\n\n    .chat-top, .chat-bottom {\n        position: absolute;\n        display: flex;\n        width: 100%;\n    }\n    \n    .chat-top {\n        left: 0;\n        top: 6px;\n        align-items: center;\n        height: 20px;\n    }\n\n    .chat-title {\n        overflow: hidden;\n        white-space: nowrap;\n        text-overflow: ellipsis;\n        width: 100%;\n        font-weight: bold;\n    }\n\n    .chat-read {\n        white-space: nowrap;\n        color: rgb(95, 99, 105);\n        font-size: 12px;\n    }\n\n    .chat-message {\n        overflow: hidden;\n        white-space: nowrap;\n        text-overflow: ellipsis;\n        width: 100%;\n        color: rgb(112, 117, 121);\n        align-self: flex-start;\n        height: 20px;\n    }\n    \n    .chat-bottom {\n        width: 100%;\n        left: 0;\n        bottom: 2px;\n        height: 24px;\n    }\n    \n    .chat-counter {\n        background-color: rgb(83, 203, 99);\n        color: white;\n        padding: 0 8px;\n        border-radius: 18px;\n        line-height: 24px;\n        font-size: 13px;\n        height: 24px;\n        align-self: flex-end;\n    }\n</style>"}}customElements.define("tg-chats",V);class J extends B{constructor(){super(),this.css();const e=this.create("button");e.classList.add("menu-button"),e.onclick=()=>{confirm("Logout?")&&E.logout()},this.appendChild(e);const t=document.createElement("img");t.src="assets/menu_svg.svg",t.classList.add("menu-img"),e.appendChild(t)}css(){this.innerHTML="<style>\n    .menu-button {\n        border-radius: 50%;\n        width: 44px;\n        height: 44px;\n        background-color: transparent;\n        border: none;\n        margin: 8px 6px 8px 14px;\n        padding: 12px;\n        cursor: pointer;\n    }\n    \n    .menu-img {\n        width: 20px;\n    }\n    \n    .menu-button:hover {\n        background-color: rgb(244, 244, 245);\n    }\n</style>"}}customElements.define("tg-menu-button",J);class K extends B{constructor(){super(),this.css();const e=this.create("form");e.classList.add("search-form"),this.appendChild(e);const t=this.create("img");t.classList.add("search-img"),t.src="assets/search_svg.svg",e.appendChild(t);const n=this.create("input");n.placeholder="Search",n.classList.add("search-input"),e.appendChild(n)}css(){this.innerHTML="<style>\n    .search-img {\n        position: absolute;\n        left: 14px;\n        top: 12px;\n        width: 20px;\n    }\n    \n    .search-form {\n        position: relative;\n        margin: 8px;\n        height: 44px;\n        width: 330px;\n    }\n    \n    .search-input {\n        padding: 15px 20px 15px 42px;\n        border: none;\n        border-radius: 22px;\n        font-size: 14px;\n        outline: none;\n        width: calc(100% - 62px);\n        height: calc(100% - 30px);\n        background-color: rgb(244, 244, 245);\n    }\n</style>"}}customElements.define("tg-search",K);class Y extends B{constructor(){super();const e=new J;this.appendChild(e);const t=new K;this.appendChild(t),this.classList.add("control-row")}}customElements.define("tg-control",Y);class q extends HTMLElement{constructor(){super(),this.innerHTML="<style>\n    .left-column {\n        display: flex;\n        flex-direction: column;\n        background-color: white;\n        box-shadow: 1px 0 2px rgb(218, 220, 224);\n        z-index: 3;\n    }\n    \n    .control-row {\n        display: flex;\n        height: 60px;;\n    }\n</style>",this.classList.add("left-column"),this.appendChild(new Y),this.appendChild(new V)}}customElements.define("tg-left-column",q);class Z extends B{constructor(){super(),this.messages=new Map([]),this.canAppend=!0,this.css(),this.hideWithStyle(),j.subscribe(()=>this.showWithStyle("block")),this.classList.add("messages-component"),this.messagesContainer=document.createElement("div"),this.messagesContainer.classList.add("messages"),this.appendChild(this.messagesContainer),this.addEventListener("scroll",e=>{e.target.scrollTop<50&&this.appendRequest()}),E.messages.subscribe(e=>this.createMessages(e)),E.chatLastMessage.subscribe(e=>this.updateChatLastMessage(e)),E.sendSucceeded.subscribe(e=>this.updateMessageSendSucceed(e)),E.messageContent.subscribe(e=>this.updateMessageContent(e)),E.readOutbox.subscribe(e=>this.updateChatReadOutbox(e))}appendRequest(){if(this.canAppend){this.canAppend=!1;const e=Array.from(this.messages.values()),t=e[e.length-1].message;E.appendChatHistory(v.value,t.id).then(e=>{this.appendMessages(e,t)})}}updateChatReadOutbox(e){if(j.value&&j.value.id===e.chat_id){let t=!1;for(const n of this.messages.values())if(t){if(n.img.src===R.Two)break;n.readOutboxAnimate()}else if(n.message.id===e.last_read_outbox_message_id){if(t=!0,n.img.src===R.Two)break;n.readOutboxAnimate()}}}updateMessageContent(e){const t=e.message_id;e.chat_id===v.value&&this.messages.has(t)&&this.messages.get(t).updateMessageContent(e.new_content)}updateMessageSendSucceed(e){const t=e.old_message_id,n=this.messages.get(t);n.messageId=e.message.id,this.messages.delete(t);const s=Array.from(this.messages.values());this.unshift(s,n)}appendMessages(e,t){if(e.total_count>0){const n=this.messagesContainer.offsetHeight;let s=!1;e.messages[0].is_outgoing!==t.is_outgoing&&(s=!0,this.messages.get(t.id).classList.add("first")),this.addMessages(e,s,t.date),this.scrollTo(0,this.messagesContainer.offsetHeight-n)}else this.scrollAppend=!1;this.canAppend=!0}createMessages(e){for(;this.messagesContainer.firstChild;)this.messagesContainer.firstChild.remove();this.readOutbox=!1,this.scrollAppend=!0,this.addMessages(e,!0,D.getTimestamp()),this.scrollHeight===this.offsetHeight&&this.scrollAppend&&this.appendRequest(),this.scrollTo(0,this.scrollHeight)}addMessages(e,t,n){e.messages.forEach((n,s)=>{const i=s-1;if(i>-1){const s=e.messages[i],a=s.date;if(!D.sameDate(n.date,a)){const e=this.create();e.classList.add("messages-date"),e.innerText=D.getTimeMessages(a),this.messagesContainer.insertBefore(e,this.messagesContainer.firstChild),this.messages.get(s.id).classList.add("first"),t=!0}}const a=new H(n);a.addClasses(t,n.is_outgoing),this.messagesContainer.insertBefore(a,this.messagesContainer.firstChild);const r=s+1;t=!1,r<e.total_count&&n.is_outgoing!==e.messages[r].is_outgoing&&(t=!0,a.classList.add("first")),n.is_outgoing&&(this.readOutbox?a.readOutbox():j.value.last_read_outbox_message_id===n.id&&(this.readOutbox=!0,a.readOutbox())),this.messages.set(n.id,a)})}minimizeWidth(e){let t=e.offsetWidth;if(t>.78*this.offsetWidth){const n=e.offsetHeight;for(;e.offsetHeight===n&&t>0;)e.style.width=--t+"px";e.style.width=++t+"px"}}unshift(e,t){e.unshift(t),this.messages.clear(),e.forEach(e=>this.messages.set(e.message.id,e))}updateChatLastMessage(e){const t=e.last_message;if(e.chat_id===v.value&&!this.messages.has(t.id)){const e=new H(t),n=Array.from(this.messages.values()),s=n[0];e.addClasses(!0,t.is_outgoing),t.is_outgoing===s.message.is_outgoing?s.classList.remove("last"):e.classList.add("first"),this.unshift(n,e),this.scrollHeight-this.scrollTop===this.clientHeight?(this.messagesContainer.appendChild(e),this.scrollTo(0,this.scrollHeight)):this.messagesContainer.appendChild(e)}}css(){this.innerHTML="<style>\n    .messages-component {\n        overflow-y: auto;\n        height: 100%;\n        scroll-behavior: smooth;\n    }\n\n    .messages {\n        display: flex;\n        flex-direction: column;\n        width: calc(100% - 22px);\n        margin: auto;\n        max-width: 696px;\n    }\n\n    .message {\n        max-width: 600px;\n        color: black;\n        padding: 8px;\n        margin: 2px;\n        word-break: break-word;\n        position: relative;\n        box-shadow: 0 1px 2px var(--message-shadow);\n        z-index: 0;\n    }\n    \n    .message-span:after {\n        content: '';\n        margin-right: 10px;\n    }\n\n    .message-text {\n    }\n    \n    .messages-date {\n        background-color: rgb(179, 184, 187);\n        color: white;\n        font-size: 12px;\n        height: 24px;\n        line-height: 24px;\n        padding: 0 8px;\n        margin: 8px;\n        align-self: center;\n        border-radius: 12px;\n    }\n\n    .float-container {\n        float: right;\n        position: relative;\n        top: 6px;\n        margin: 0 -8px 0 -6px;\n        display: flex;\n    }\n    \n    .stranger .float-container {\n        margin-right: -1px;\n    }\n    \n    .my .float-container {\n        width: 54px;\n    }\n    \n    .my .message-date {\n        color: rgb(83, 173, 83);\n    }\n    \n    .stranger .message-date {\n        color: rgb(160, 170, 179);\n    }\n\n    .message-date {\n        \n        font-size: 12px;\n    }\n    \n    :root {\n        --stranger-background: white;\n        --chat-background: rgb(230, 235, 238);\n        --my-background: rgb(238, 254, 233);\n        --message-shadow: rgb(204, 211, 216);\n    }\n\n    .stranger {\n        align-self: flex-start;\n        background-color: var(--stranger-background);\n        border-radius: 6px 12px 12px 6px;\n    }\n\n    .my {\n        align-self: flex-end;\n        background-color: var(--my-background);\n        border-radius: 12px 6px 6px 12px;\n    }\n    \n    .my.last {\n        border-bottom-right-radius: 0;\n    }\n    \n    .stranger.last {\n        border-bottom-left-radius: 0;\n    }\n    \n    .my.first {\n        border-top-right-radius: 12px;\n    }\n\n    .stranger.first {\n        border-top-left-radius: 12px;\n    }\n    \n    .tail {\n        position: absolute;\n        z-index: -1;\n        bottom: 0;\n        height: 20px;\n        width: 8px;\n    }\n    \n    .my.last > .tail {\n        right: -7px;\n        border-radius: 0 0 1px 0 / 0 0 4px 0;\n        background-color: var(--my-background);\n        box-shadow: 1px 1px 2px var(--message-shadow);\n    }\n\n    .stranger.last > .tail {\n        left: -7px;\n        border-radius: 0 0 0 1px / 0 0 0 4px;\n        background-color: var(--stranger-background);\n        box-shadow: -1px 1px 2px var(--message-shadow);\n    }\n\n    @-moz-document url-prefix() {\n        .stranger.last > .tail {\n            box-shadow: -1px 1px 1px var(--message-shadow);\n        }\n\n        .my.last > .tail {\n            box-shadow: 1px 1px 1px var(--message-shadow);\n        }\n    }\n    \n    .tail:before {\n        content: '';\n        position: absolute;\n        bottom: 0;\n        width: 2px;\n        height: 2px;\n        border-radius: 10px;\n        z-index: -1;\n    }\n\n    .stranger.last > .tail:before {\n        left: 0;\n        background-color: var(--stranger-background);\n    }\n    \n    .my.last > .tail:before {\n        left: 6px;\n        background-color: var(--my-background);\n    }\n    \n    .tail:after {\n        content: '';\n        position: absolute;\n        z-index: 16;\n        width: 13px;\n        height: 25px;\n        top: -4px;\n    }\n\n    .stranger.last > .tail:after {\n        right: 1px;\n        border-radius: 0 0 100% 0 / 0 0 86% 0;\n        background-color: var(--chat-background);\n        box-shadow: inset -1px 0 2px -1px var(--message-shadow);\n    }\n\n    .my.last > .tail:after {\n        right: -6px;\n        border-radius: 0 0 0 100% / 0 0 0 86%;\n        background-color: var(--chat-background);\n        box-shadow: inset 1px 0 2px -1px var(--message-shadow);\n    }\n    \n    .check-img {\n        \n    }\n    \n    .check-container {\n        width: 20px;\n        height: 18px;\n        position: relative;\n        margin-left: 6px;\n    }\n\n    .check-mark {\n        display: inline-block;\n        width: 0;\n        height: 10px;\n        transform: rotate(45deg);\n    }\n\n    .check-mark-received {\n        margin-left: 2px;\n    }\n\n    .check-mark:before,\n    .check-mark:after {\n        content: \"\";\n        position: absolute;\n        background-color: white;\n    }\n\n    .check-mark:after {\n        width: 1px;\n        left: 0;\n        bottom: 5px;\n    }\n\n    .check-mark:after {\n        height: 10px;\n    }\n\n    .check-mark-animate:after {\n        /*height: 0;*/\n        animation: check-after 0.5s 550ms cubic-bezier(.4, .0, .23, 1) forwards;\n    }\n\n    .check-mark:before {\n        height: 1px;\n        left: -3px;\n        top: 4px;\n    }\n\n    .check-mark:before {\n        width: 4px;\n    }\n\n    .check-mark-animate:before {\n        width: 0;\n        animation: check-before 0.3s 250ms cubic-bezier(.4, .0, .23, 1) forwards;\n    }\n\n    .check-mark-received:before {\n        display: none;\n    }\n\n    @keyframes check-before {\n        from {\n            width: 0;\n        }\n        to {\n            width: 4px;\n        }\n    }\n\n    @keyframes check-after {\n        from {\n            height: 0;\n        }\n        to {\n            height: 10px;\n        }\n    }\n</style>"}}var $,X,Q,ee,te,ne,se;customElements.define("tg-messages",Z),function(e){e.More="assets/more_svg.svg",e.Search="assets/search_svg.svg",e.Microphone="assets/microphone_svg.svg"}($||($={}));class ie extends B{constructor(){super(),this.css(),this.classList.add("input-component"),this.hideWithStyle(),j.subscribe(()=>this.showWithStyle("flex"));const e=this.create("form");e.classList.add("main-form","my","last"),this.appendChild(e);const t=document.createElement("img");t.src="assets/smile_svg.svg",t.classList.add("input-smile"),e.appendChild(t);const n=document.createElement("img");n.src="assets/attach_svg.svg",n.classList.add("input-attach"),e.appendChild(n);const s=this.create();s.classList.add("tail","input-tail"),e.appendChild(s);const i=document.createElement("input");i.classList.add("main-input"),i.type="text",i.placeholder="Message",e.appendChild(i);const a=this.create("button");a.classList.add("input-microphone"),this.appendChild(a);const r=this.create();r.classList.add("input-microphone-img"),a.appendChild(r),e.addEventListener("submit",e=>{e.preventDefault(),E.sendMessage(i.value),i.value=""})}css(){this.innerHTML=`<style>\n    .input-component {\n        height: 84px;\n        max-width: 702px;\n        z-index: 1;\n        margin: auto;\n        padding: 0 11px;\n        width: calc(100% - 22px);\n        display: flex;\n        align-items: center;\n    }\n    \n    .input-attach {\n        position: absolute;\n        right: 16px;\n        top: 16px;\n        cursor: pointer;\n    }\n\n    .input-smile {\n        position: absolute;\n        left: 16px;\n        top: 16px;\n        cursor: pointer;\n    }\n    \n    .input-microphone {\n        height: 54px;\n        width: 54px;\n        margin: 0 8px;\n        padding: 14px;\n        border-radius: 50%;\n        border: none;\n        background-color: rgb(83, 166, 243);\n        z-index: 3;\n        cursor: pointer;\n    }\n    \n    .input-microphone-img {\n        background-color: white;\n        width: 26px;\n        height: 26px;\n        -webkit-mask: url(${$.Microphone}) no-repeat center;\n        mask: url(${$.Microphone}) no-repeat center;\n    }\n\n    .main-form {\n        position: relative;\n        height: 54px;\n        width: 100%;\n        background-color: transparent;\n        align-self: normal !important;\n        margin: 10px 0 20px;\n    }\n\n    .main-input {\n        padding: 15px 56px 15px 48px;\n        border: none;\n        border-radius: 12px 12px 0 12px;\n        font-size: 14px;\n        outline: none;\n        width: calc(100% - 104px);\n        height: calc(100% - 30px);\n        background-color: white;\n        box-shadow: 0 1px 2px rgb(204, 211, 216);\n    }\n    \n    .input-tail {\n        z-index: 2;\n        background-color: white !important;\n    }\n    \n    .input-tail:before {\n        background-color: white !important;\n    }\n</style>`}}customElements.define("tg-input",ie);class ae extends W{constructor(){super(),this.css(),this.createImg(),this.img.style.display="none",this.img.classList.add("chat-header-img"),this.createCircle(),this.letterCircle.style.display="none",this.letterCircle.classList.add("chat-header-img","chat-header-letter")}change(e){const t=e.photo;t?(this.setSrc(t),this.img.style.display="block",this.letterCircle.style.display="none"):(this.setInitials(e),this.img.style.display="none",this.letterCircle.style.display="block")}css(){this.innerHTML="<style>\n    .chat-header-img {\n        width: 44px;\n        height: 44px;\n        margin: 8px;\n    }\n    \n    .chat-header-letter {\n        line-height: 46px;\n    }\n</style>"}}customElements.define("tg-chat-photo-header",ae);class re extends B{constructor(e){super();const t=this.create("button");t.classList.add("base-button"),this.appendChild(t);const n=this.create();switch(n.classList.add("base-button-img"),t.appendChild(n),e){case $.More:n.classList.add("base-button-more");break;case $.Search:n.classList.add("base-button-search")}}}customElements.define("tg-button",re);class oe extends B{constructor(){super(),this.css(),this.classList.add("chat-header"),this.photo=new ae,this.appendChild(this.photo);const e=this.create();e.classList.add("chat-title-column"),this.appendChild(e);const t=this.create();t.classList.add("chat-header-title"),e.appendChild(t);const n=this.create();n.classList.add("chat-online"),n.innerText="online",e.appendChild(n);const s=new re($.Search);this.appendChild(s);const i=new re($.More);this.appendChild(i),this.hideWithStyle(),j.subscribe(e=>{this.showWithStyle("flex"),t.innerText=e.title,this.photo.change(e)})}css(){this.innerHTML=`<style>\n    .chat-header {\n        height: 62px;\n        display: flex;\n        align-items: center;\n        background-color: white;\n        box-shadow: 0 1px 2px rgb(218, 220, 224);\n        padding: 0 12px;\n        z-index: 2;\n    }\n    \n    .chat-online {\n        position: absolute;\n        left: 0;\n        bottom: -18px;\n        font-size: 12px;\n        color: rgb(57, 146, 233);\n    }\n    \n    .chat-title-column {\n        position: relative;\n        width: 100%;\n    }\n    \n    .chat-header-title {\n        position: absolute;\n        left: 0;\n        bottom: -1px;\n        font-size: 14px;\n        font-weight: bold;    \n    }\n    \n    .base-button-img {\n        background-color: rgb(112, 117, 121);\n        width: 20px;\n        height: 20px;\n    }\n    \n    .base-button-search {\n        -webkit-mask: url(${$.Search}) no-repeat center;\n        mask: url(${$.Search}) no-repeat center;\n    }\n    \n    .base-button-more {\n        -webkit-mask: url(${$.More}) no-repeat center;\n        mask: url(${$.More}) no-repeat center;\n    }\n    \n    .base-button {\n        border-radius: 50%;\n        width: 44px;\n        height: 44px;\n        background-color: transparent;\n        border: none;\n        padding: 12px;\n        cursor: pointer;\n        margin: 2px;\n    }\n    \n    .base-button:hover {\n        background-color: rgb(244, 244, 245);\n    }\n</style>`}}customElements.define("tg-chat-header",oe),function(e){e.Private="Private",e.Group="Group",e.Channel="Channel"}(X||(X={}));class ce extends B{constructor(e){super(),this.classList.add("bm-button-container");const t=this.create();t.classList.add("bm-button"),this.appendChild(t);const n=this.create();switch(n.classList.add("bm-img"),t.appendChild(n),e){case X.Channel:n.classList.add("bm-channel");break;case X.Group:n.classList.add("bm-group");break;case X.Private:n.classList.add("bm-private")}const s=this.create();s.classList.add("bm-caption"),s.innerText=e,this.appendChild(s)}}customElements.define("tg-bm-button",ce);class de extends B{constructor(){super(),this.css(),this.classList.add("before-messages");const e=document.createElement("img");e.classList.add("before-messages-img"),e.src="assets/chatsplaceholder_svg.svg",this.appendChild(e);const t=this.create();t.classList.add("before-messages-caption"),t.innerHTML="Open Chat <br> or create a new one",this.appendChild(t);const n=this.create();n.classList.add("bm-buttons"),this.appendChild(n);const s=new ce(X.Private);n.appendChild(s);const i=new ce(X.Group);n.appendChild(i);const a=new ce(X.Channel);n.appendChild(a),j.subscribe(()=>this.hideWithStyle())}css(){this.innerHTML="<style>\n    :root {\n        --placeholder-blue: rgb(57, 146, 233);\n        --button-blue: rgb(83, 166, 243);\n        --placeholder-gray: rgb(112, 117, 121);\n    }\n    \n    .before-messages {\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n        justify-content: center;\n        height: 100%;\n    }\n    \n    .before-messages-caption {\n        text-align: center;\n        font-size: 22px;\n        color: var(--placeholder-gray);\n        margin: 20px;\n    }\n    \n    .bm-buttons {\n        display: flex;\n        justify-content: space-between;\n        width: 346px;\n    }\n    \n    \n    .bm-button-container {\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n        cursor: pointer;\n    }\n    \n    .bm-caption {\n        color: var(--placeholder-gray);\n        font-size: 12px;\n    }\n\n    .bm-img {\n        background-color: var(--placeholder-gray);\n        width: 34px;\n        height: 34px;\n        margin: 20px;\n    }\n    \n    .bm-private {\n        -webkit-mask: url(assets/newprivate_svg.svg) no-repeat center;\n        mask: url(assets/newprivate_svg.svg) no-repeat center;\n    }\n    \n    .bm-group {\n        -webkit-mask: url(assets/newgroup_svg.svg) no-repeat center;\n        mask: url(assets/newgroup_svg.svg) no-repeat center;\n    }\n    \n    .bm-channel {\n        -webkit-mask: url(assets/newchannel_svg.svg) no-repeat center;\n        mask: url(assets/newchannel_svg.svg) no-repeat center;\n    }\n\n    .bm-button {\n        width: 74px;\n        height: 74px;\n        background-color: white;\n        border-radius: 50%;\n        margin: 8px;\n    }\n\n    .bm-button-container:hover .bm-button {\n        background-color: var(--button-blue);\n    }\n\n    .bm-button-container:hover .bm-img {\n        background-color: white;\n    }\n\n    .bm-button-container:hover .bm-caption {\n        color: var(--placeholder-blue);\n    }\n</style>"}}customElements.define("tg-before-message",de);class le extends HTMLElement{constructor(){super(),this.css(),this.classList.add("right-column"),this.appendChild(new de),this.appendChild(new oe),this.appendChild(new Z),this.appendChild(new ie)}css(){this.innerHTML="<style>\n    .hide {\n        display: none;\n    }\n    \n    .right-column {\n        position: relative;\n        display: flex;\n        flex-direction: column;\n        width: 100%;\n        font-size: 14px;\n    }\n</style>"}}customElements.define("tg-right-column",le);class he extends HTMLElement{constructor(){super(),this.css(),this.classList.add("main-component"),this.appendChild(new q),this.appendChild(new le)}css(){this.innerHTML="<style>\n    .main-component {\n        margin: auto;\n        display: flex;\n        height: 100vh;\n        width: 100%;\n        max-width: 1678px;\n        background-color: rgb(230, 235, 238);\n        box-shadow: 0 0 2px 1px rgb(218, 220, 224);\n    }\n</style>"}}customElements.define("tg-main",he),function(e){e.Close="TwoFactorSetupMonkeyClose.json",e.CloseAndPeek="TwoFactorSetupMonkeyCloseAndPeek.json",e.CloseAndPeekToIdle="TwoFactorSetupMonkeyCloseAndPeekToIdle.json",e.Idle="TwoFactorSetupMonkeyIdle.json",e.Peek="TwoFactorSetupMonkeyPeek.json",e.Tracking="TwoFactorSetupMonkeyTracking.json"}(Q||(Q={})),function(e){e.Sms="authenticationCodeTypeSms",e.TelegramMessage="authenticationCodeTypeTelegramMessage"}(ee||(ee={}));class ue extends HTMLElement{constructor(e,t){super(),this.form=this.create("form"),this.appendChild(this.form),this.caption=this.createCaption(e),this.form.appendChild(this.caption),this.input=this.create("input"),this.input.type=t,this.input.placeholder=e,this.form.appendChild(this.input),this.input.addEventListener("focus",()=>{this.input.value&&ue.show(this.caption),this.caption.classList.add("focus-caption")}),this.input.addEventListener("blur",()=>{this.caption.classList.remove("focus-caption"),this.input.value||ue.hide(this.caption)}),this.input.addEventListener("input",()=>{this.input.value?ue.show(this.caption):ue.hide(this.caption)}),this.form.addEventListener("submit",e=>e.preventDefault())}setInvalid(e){this.caption.innerText=e,this.caption.classList.add("invalid-caption"),this.input.classList.add("invalid-input")}removeInvalid(e){this.caption.innerText!==e&&(this.caption.innerText=e),this.caption.classList.remove("invalid-caption"),this.input.classList.remove("invalid-input")}static getIntCode(e){return parseInt(e.replace(/\s/g,""))}create(e="div"){return document.createElement(e)}static show(e){e.classList.remove("hide")}static hide(e){e.classList.add("hide")}createCaption(e){const t=this.create();return t.innerText=e,t.classList.add("caption","hide"),t}}customElements.define("tg-form",ue),function(e){e.Country="Country",e.Phone="Phone Number",e.Code="Code",e.Password="Password",e.Name="Name",e.LastName="Last Name (optional)"}(te||(te={})),function(e){e.Text="text",e.Tel="tel",e.Password="password"}(ne||(ne={})),function(e){e.PhoneNumberInvalid="PHONE_NUMBER_INVALID",e.PhoneCodeInvalid="PHONE_CODE_INVALID",e.PasswordHashInvalid="PASSWORD_HASH_INVALID"}(se||(se={}));class pe extends B{constructor(e){super(),this.classList.add("login-column"),this.header=this.create("h1"),this.header.classList.add("login-header"),this.appendChild(this.header),this.caption=this.create("p"),this.caption.classList.add("login-caption"),this.appendChild(this.caption),this.header.innerText=e?e.header:"",this.caption.innerText=e?e.caption:""}}class ge extends pe{constructor(e){super(),this.editPhone=new g,this.currentName=Q.Idle;const t=e.authorization_state.code_info;this.setText(this.getCaption(t.type),t.phone_number),n.e(0).then(n.t.bind(null,2,7)).then(e=>{this.lottie=e,this.loadAnimation([Q.Idle,Q.Tracking])}),this.render()}render(){const e=new ue(te.Code,ne.Text);e.input.maxLength=5,e.input.autofocus=!0,this.appendChild(e),e.input.oninput=()=>{const t=e.input.value;t.length>0?this.currentName=Q.Tracking:this.currentName=Q.Idle,t.length>4?this.checkCode(t).catch(t=>{t.message===se.PhoneCodeInvalid&&e.setInvalid("Invalid Code")}):e.removeInvalid(te.Code)}}loadAnimation(e){const t=this.create();t.classList.add("monkey-face"),this.insertBefore(t,this.firstChild),e.forEach(e=>{const n=this.create();n.classList.add("animation-container"),t.appendChild(n);const s=this.lottie.loadAnimation({container:n,renderer:"svg",loop:!0,autoplay:!0,path:"assets/"+e});this.updateAnimation(n,e),s.addEventListener("DOMLoaded",()=>s.addEventListener("loopComplete",()=>this.updateAnimation(n,e)))})}updateAnimation(e,t){this.currentName!==t?ue.hide(e):ue.show(e)}checkCode(e){return E.checkAuthenticationCode(e)}setText(e,t){this.caption.innerText=e,this.header.innerText="+"+t;const n=document.createElement("img");n.src="assets/edit_svg.svg",n.classList.add("code-edit"),this.header.appendChild(n),n.onclick=()=>{this.editPhone.value=t}}getCaption(e){switch(e["@type"]){case ee.Sms:return"We have sent you an SMS with the code.";case ee.TelegramMessage:return"We have sent the code to the Telegram app on your other device."}}}customElements.define("tg-code",ge);class me extends HTMLElement{constructor(e){super(),this.country=e;const t=document.createElement("div");t.classList.add("country-item"),this.appendChild(t);const n=document.createElement("div");n.classList.add("flag-icon","flag-icon-"+e.iso),t.appendChild(n);const s=document.createElement("div");s.innerText=e.name,s.classList.add("country-name"),t.appendChild(s);const i=document.createElement("div");i.innerText=e.code,i.classList.add("country-code"),t.appendChild(i),this.classList.add("country")}}customElements.define("tg-country",me);const fe=[["AB","ab","+7 840","+7 940","+995 44"],["AF","af","+93"],["AX","ax","+358 18"],["AL","al","+355"],["DZ","dz","+213"],["AS","as","+1 684"],["AD","ad","+376"],["AO","ao","+244"],["AI","ai","+1 264"],["AG","ag","+1 268"],["AR","ar","+54"],["AM","am","+374"],["AW","aw","+297"],["SH","sh_ac","+247"],["AU","au","+61"],["AU","au_et","+672"],["AT","at","+43"],["AZ","az","+994"],["BS","bs","+1 242"],["BH","bh","+973"],["BD","bd","+880"],["BB","bb","+1 246"],["AG","ag_bar","+1 268"],["BY","by","+375"],["BE","be","+32"],["BZ","bz","+501"],["BJ","bj","+229"],["BM","bm","+1 441"],["BT","bt","+975"],["BO","bo","+591"],["BQ","bq","+599 7"],["BA","ba","+387"],["BW","bw","+267"],["BR","br","+55"],["IO","io","+246"],["VG","vg","+1 284"],["BN","bn","+673"],["BG","bg","+359"],["BF","bf","+226"],["MY","mm","+95"],["BI","bi","+257"],["KH","kh","+855"],["CM","cm","+237"],["CA","ca","+1"],["CV","cv","+238"],["KY","ky","+1 345"],["CF","cf","+236"],["TD","td","+235"],["CL","cl","+56"],["CN","cn","+86"],["CX","cx","+61"],["CC","cc","+61"],["CO","co","+57"],["KM","km","+269"],["CG","cg","+242"],["CD","cd","+243"],["CK","ck","+682"],["CR","cr","+506"],["CI","ci","+225"],["HR","hr","+385"],["CU","cu","+53"],["CW","cw","+599 9"],["CY","cy","+357"],["CZ","cz","+420"],["DK","dk","+45"],["DG","dg","+246"],["DJ","dj","+253"],["DM","dm","+1 767"],["DO","do","+1 809","+1 829","+1 849"],["TL","tl","+670"],["EC","ec","+593"],["EG","eg","+20"],["SV","sv","+503"],["GQ","gq","+240"],["ER","er","+291"],["EE","ee","+372"],["ET","et","+251"],["FK","fk","+500"],["FO","fo","+298"],["FJ","fj","+679"],["FI","fi","+358"],["FR","fr","+33"],["GF","gf","+594"],["PF","pf","+689"],["GA","ga","+241"],["GM","gm","+220"],["GE","ge","+995"],["DE","de","+49"],["GH","gh","+233"],["GI","gi","+350"],["GR","gr","+30"],["GL","gl","+299"],["GD","gd","+1 473"],["GP","gp","+590"],["GU","gu","+1 671"],["GT","gt","+502"],["GG","gg","+44"],["GN","gn","+224"],["GW","gw","+245"],["GY","gy","+592"],["HT","ht","+509"],["HN","hn","+504"],["HK","hk","+852"],["HU","hu","+36"],["IS","is","+354"],["IN","in","+91"],["ID","id","+62"],["IR","ir","+98"],["IQ","iq","+964"],["IE","ie","+353"],["IL","il","+972"],["IT","it","+39"],["JM","jm","+1 876"],["SJ","sj","+47 79"],["JP","jp","+81"],["JE","je","+44"],["JO","jo","+962"],["KZ","kz","+7 7"],["KE","ke","+254"],["KI","ki","+686"],["KP","kp","+850"],["KR","kr","+82"],["KW","kw","+965"],["KG","kg","+996"],["LA","la","+856"],["LV","lv","+371"],["LB","lb","+961"],["LS","ls","+266"],["LR","lr","+231"],["LY","ly","+218"],["LI","li","+423"],["LT","lt","+370"],["LU","lu","+352"],["MO","mo","+853"],["MK","mk","+389"],["MG","mg","+261"],["MW","mw","+265"],["MY","my","+60"],["MV","mv","+960"],["ML","ml","+223"],["MT","mt","+356"],["MH","mh","+692"],["MQ","mq","+596"],["MR","mr","+222"],["MU","mu","+230"],["YT","yt","+262"],["MX","mx","+52"],["FM","fm","+691"],["MD","md","+373"],["MC","mc","+377"],["MN","mn","+976"],["ME","me","+382"],["MS","ms","+1 664"],["MA","ma","+212"],["MZ","mz","+258"],["NA","na","+264"],["NR","nr","+674"],["NP","np","+977"],["NL","nl","+31"],["NC","nc","+687"],["NZ","nz","+64"],["NI","ni","+505"],["NE","ne","+227"],["NG","ng","+234"],["NU","nu","+683"],["NF","nf","+672"],["MP","mp","+1 670"],["NO","no","+47"],["OM","om","+968"],["PK","pk","+92"],["PW","pw","+680"],["PS","ps","+970"],["PA","pa","+507"],["PG","pg","+675"],["PY","py","+595"],["PE","pe","+51"],["PH","ph","+63"],["PN","pn","+64"],["PL","pl","+48"],["PT","pt","+351"],["PR","pr","+1 787","+1 939"],["QA","qa","+974"],["RE","re","+262"],["RO","ro","+40"],["RU","ru","+7"],["RW","rw","+250"],["BL","bl","+590"],["SH","sh","+290"],["KN","kn","+1 869"],["LC","lc","+1 758"],["MF","mf","+590"],["PM","pm","+508"],["VC","vc","+1 784"],["WS","ws","+685"],["SM","sm","+378"],["ST","st","+239"],["SA","sa","+966"],["SN","sn","+221"],["RS","rs","+381"],["SC","sc","+248"],["SL","sl","+232"],["SG","sg","+65"],["BQ","nl_bq3","+599 3"],["SX","sx","+1 721"],["SK","sk","+421"],["SI","si","+386"],["SB","sb","+677"],["SO","so","+252"],["ZA","za","+27"],["GS","gs","+500"],[!1,"ge_so","+995 34"],["SS","ss","+211"],["ES","es","+34"],["LK","lk","+94"],["SD","sd","+249"],["SR","sr","+597"],["SJ","sj_no","+47 79"],["SZ","sz","+268"],["SE","se","+46"],["CH","ch","+41"],["SY","sy","+963"],["TW","tw","+886"],["TJ","tj","+992"],["TZ","tz","+255"],["TH","th","+66"],["TG","tg","+228"],["TK","tk","+690"],["TO","to","+676"],["TT","tt","+1 868"],["TN","tn","+216"],["TR","tr","+90"],["TM","tm","+993"],["TC","tc","+1 649"],["TV","tv","+688"],["UG","ug","+256"],["UA","ua","+380"],["AE","ae","+971"],["UK","uk","+44"],["US","us","+1"],["UY","uy","+598"],["VI","vi","+1 340"],["UZ","uz","+998"],["VU","vu","+678"],["VE","ve","+58"],["VA","va","+39 06 698","+379"],["VN","vn","+84"],["WF","wf","+681"],["YE","ye","+967"],["ZM","zm","+260"],[!1,"tz_uk","+255"],["ZW","zw","+263"]];var be;!function(e){e.Down="assets/down_svg.svg",e.Up="assets/up_svg.svg"}(be||(be={}));class ve extends ue{constructor(){super(te.Country,ne.Text),this.countryCodes=new Map,this.countryCode=new g,this.countryListFetched=new g;const e=this.create("button");e.classList.add("country-button","form-button"),this.form.appendChild(e),this.buttonImg=this.create("img"),this.buttonImg.src=be.Down,this.buttonImg.classList.add("country-button-img"),e.appendChild(this.buttonImg),this.createCountryList()}createCountryList(){const e=this.create();e.classList.add("country-list","hide"),this.form.appendChild(e);const t=[];let n;fetch("assets/i18n/en.json").then(e=>e.json()).then(n=>{fe.forEach(s=>{const i=s[1],a=s[0].toString().toLowerCase(),r=n[i];for(let n=2;n<s.length;n++){const i=s[n].toString(),o=new me({name:r,code:i,iso:a,lowName:r.toLowerCase()});e.appendChild(o),t.push(o),this.countryCodes.set(ue.getIntCode(i),r)}}),this.countryListFetched.value=!0}),e.onmousedown=e=>{const t=e.target.country;this.input.value=t.name,this.countryCode.value=t.code.slice(1),ue.show(this.caption)},e.onmousemove=e=>{const t=e.target;t.country&&n!==t&&(n=t,this.input.placeholder=n.country.name)},e.onmouseleave=()=>{this.input.placeholder=te.Country},this.input.addEventListener("focus",()=>{this.buttonImg.src=be.Up,ue.show(e)}),this.input.addEventListener("blur",()=>{this.buttonImg.src=be.Down,ue.hide(e)}),this.input.oninput=()=>{this.input.value?ue.show(this.caption):ue.hide(this.caption),t.forEach(e=>{const t=e.country,n=this.input.value.toLowerCase();t.lowName.slice(0,n.length)===n||t.code.includes(n)?e.classList.remove("hide"):e.classList.add("hide")})},this.form.onsubmit=e=>{e.preventDefault();for(const e of t)if(!e.classList.contains("hide")){const t=e.country;this.input.value=t.name,this.countryCode.value=t.code.slice(1);break}}}}customElements.define("tg-country-form",ve);class xe extends ue{constructor(){super(te.Phone,ne.Tel),this.value=new g,this.input.autofocus=!0,this.input.classList.add("phone-input"),this.plus=this.create("span"),this.plus.innerText="+",this.plus.classList.add("number","hide"),this.form.appendChild(this.plus),this.input.addEventListener("focus",()=>{this.numberAchieveContent(),this.input.classList.add("phone-input-focus")}),this.input.addEventListener("blur",()=>{this.input.value||(ue.hide(this.plus),this.input.classList.remove("phone-input-focus"))}),this.input.oninput=()=>{this.value.value=this.input.value,ue.show(this.caption),this.removeInvalid(te.Phone)}}numberAchieveContent(){ue.show(this.caption),ue.show(this.plus)}}customElements.define("tg-phone-form",xe);const ye={phone:{header:"Sign in to Telegram",caption:"Please confirm your country and enter phone number."},password:{header:"Enter a Password",caption:"Your account is protected with an additional password."},reg:{header:"Your Name",caption:"Enter your name and add a profile picture."}};class we extends HTMLElement{constructor(e){super(),this.baseText=e,this.button=document.createElement("button"),this.button.classList.add("next","hide"),this.button.innerText=e,this.appendChild(this.button)}load(){this.button.innerText="PLEASE WAIT..."}setBaseText(){this.button.innerText=this.baseText}}var ke,Ce,Le;customElements.define("tg-login-button",we),function(e){e.Next="NEXT",e.Start="START MESSAGING"}(ke||(ke={})),function(e){e.On="assets/checkboxon_svg.svg",e.Empty="assets/checkboxempty_svg.svg"}(Ce||(Ce={}));class Se extends pe{constructor(e){super(ye.phone);const t=this.create("img");t.src="assets/Telegram_2019_Logo.svg",t.width=160,t.classList.add("main-logo"),this.insertBefore(t,this.firstChild);const n=new ve;this.appendChild(n);const s=new xe;this.appendChild(s);let i=!0;const a=this.create();a.classList.add("login-checkbox"),this.appendChild(a);const r=document.createElement("img");r.src=i?Ce.On:Ce.Empty,r.classList.add("checkbox-img"),a.appendChild(r);const o=this.create();o.innerText="Keep me signed in",a.appendChild(o),r.onclick=()=>{i=!i,r.src=i?Ce.On:Ce.Empty};const c=new we(ke.Next);this.appendChild(c);const d=e=>{c.load(),this.setNumber(e).catch(e=>{switch(c.setBaseText(),e.message){case se.PhoneNumberInvalid:s.setInvalid("Phone number invalid");break;default:s.setInvalid(e.message)}})};s.form.onsubmit=e=>{e.preventDefault();const t=s.input.value;t.length>9&&d(t)},c.button.onclick=()=>{d(s.input.value)},n.countryCode.subscribe(e=>{s.input.value=e,s.numberAchieveContent(),setTimeout(()=>s.input.focus(),0)}),s.value.subscribe(e=>{e.length>9?ue.show(c.button):ue.hide(c.button);let t=!1;for(let s=e.length;s>0;s--){const i=e.slice(0,s),a=ue.getIntCode(i);if(n.countryCodes.has(a)){n.input.value=n.countryCodes.get(a),ue.show(n.caption),t=!0;break}}t||(n.input.value="",ue.hide(n.caption))}),e&&n.countryListFetched.subscribe(()=>{s.input.value=e,s.value.value=e})}setNumber(e){return E.setAuthenticationPhoneNumber(e)}}customElements.define("tg-phone",Se),function(e){e.Show="assets/eye1_svg.svg",e.Hide="assets/eye2_svg.svg"}(Le||(Le={}));class _e extends ue{constructor(e,t){super(e,t),this.input.autofocus=!0,this.button=document.createElement("button"),this.button.classList.add("form-button"),this.button.type="button",this.form.appendChild(this.button),this.img=document.createElement("img"),this.img.src=Le.Show,this.button.appendChild(this.img)}}customElements.define("tg-password-form",_e);class Me extends pe{constructor(){super(ye.password),n.e(0).then(n.t.bind(null,2,7)).then(e=>{this.lottie=e,this.render()})}render(){const e=ne.Password,t=new _e(te.Password,e);this.appendChild(t),t.form.onsubmit=()=>{const e=t.input.value;e.length>0&&this.checkPass(e).catch(e=>{switch(console.log("error: ",e),t.setInvalid("Invalid Password"),e.message){case se.PasswordHashInvalid:t.setInvalid("Password Hash Invalid")}})},t.input.oninput=()=>{t.input.classList.contains("invalid-input")&&t.removeInvalid(te.Password)},t.button.onclick=s=>{s.preventDefault();const i=n.get(Q.Peek);t.input.type===e?(t.input.type=ne.Text,t.img.src=Le.Hide,i.animation.playSegments([0,15],!0)):(t.input.type=ne.Password,t.img.src=Le.Show,i.animation.playSegments([16,33],!0)),t.input.focus()},this.animationContainer=this.create(),this.animationContainer.classList.add("monkey-face"),this.insertBefore(this.animationContainer,this.firstChild);const n=new Map;for(const e of[Q.Close,Q.Peek]){const t=this.create();t.classList.add("animation-container"),this.animationContainer.appendChild(t);const s=this.lottie.loadAnimation({container:t,renderer:"svg",loop:!1,autoplay:!1,path:"assets/"+e});e===Q.Close?(s.playSegments([0,50],!0),s.onEnterFrame=e=>{if(e.currentTime>50){s.pause(),ue.hide(t);const e=n.get(Q.Peek);ue.show(e.container)}}):ue.hide(t),n.set(e,{container:t,animation:s})}}checkPass(e){return E.checkAuthenticationPassword(e)}}customElements.define("tg-password",Me);class Ee extends HTMLElement{constructor(){super(),this.imgSrc=new g,this.translateValue={x:0,y:0},this.classList.add("hide","cancel-area");const e=document.createElement("div");e.classList.add("photo-picker"),this.appendChild(e);const t=document.createElement("div");t.classList.add("avatar-rect"),e.appendChild(t);const n=document.createElement("img");n.classList.add("avatar-img");const s=document.createElement("div");s.classList.add("avatar-round"),t.appendChild(s),this.check=document.createElement("button"),this.check.classList.add("check-picker"),e.appendChild(this.check);const i=document.createElement("img");i.src="assets/check_svg.svg",this.check.appendChild(i);const a=document.createElement("img");a.src="assets/close_svg.svg",a.classList.add("close-picker"),e.appendChild(a);const r=document.createElement("h4");r.innerText="Drag to Reposition",r.classList.add("picker-caption"),e.appendChild(r);const o=()=>{n.style.transform=`translate(${this.translateValue.x}px, ${this.translateValue.y}px) scale(${this.scale})`};this.imgSrc.subscribe(e=>{t.appendChild(n),n.src=e;const s=n.offsetWidth,i=n.offsetHeight;this.scale=this.getScale(n,t),this.translateValue.x=-this.scale*s/2+t.offsetHeight/2,this.translateValue.y=-this.scale*i/2+t.offsetWidth/2,o()}),t.onwheel=e=>{e.preventDefault()};let c=!1,d={x:0,y:0};t.onmousedown=e=>{e.preventDefault(),c=!0,d={x:e.clientX,y:e.clientY},this.classList.add("cancel-area-grab")},this.onmouseup=()=>{setTimeout(()=>c=!1),this.classList.remove("cancel-area-grab")},this.onmousemove=e=>{if(c){const s=e.clientX-d.x,i=e.clientY-d.y,a=this.translateValue.x+s,r=this.translateValue.y+i;a<0&&a+this.scale*n.offsetWidth>t.offsetWidth&&(this.translateValue.x=a),r<0&&r+this.scale*n.offsetHeight>t.offsetHeight&&(this.translateValue.y=r),d={x:e.clientX,y:e.clientY},o()}},a.onclick=()=>ue.hide(this),this.onclick=e=>{e.target!==this||c||ue.hide(this)}}getScale(e,t){const n=e.offsetWidth,s=e.offsetHeight;return t.offsetWidth/(s>n?n:s)}}customElements.define("tg-photo-picker",Ee);class Te extends pe{constructor(){super(ye.reg);const e=new ue(te.Name,ne.Text);this.appendChild(e);const t=e.input;t.autofocus=!0;const n=document.createElement("input");n.type="file",n.style.display="none",n.accept="image/*",this.appendChild(n);const s=new ue(te.LastName,ne.Text);this.appendChild(s);const i=new we(ke.Start);this.appendChild(i);const a=document.createElement("div");a.classList.add("photo-preview"),this.insertBefore(a,this.firstChild);const r=document.createElement("img");r.classList.add("main-avatar"),a.appendChild(r);const o=document.createElement("img");o.src="assets/cameraadd_svg.svg",o.classList.add("add-photo"),a.appendChild(o);const c=new Ee;document.body.appendChild(c),a.onclick=()=>{n.value="",n.click()},t.oninput=()=>{t.value.length>0?ue.show(i.button):ue.hide(i.button)},n.onchange=()=>{ue.show(c);const e=n.files[0],t=new FileReader;t.onload=function(e){c.imgSrc.value=e.target.result},t.readAsDataURL(e)},c.check.onclick=()=>{ue.hide(c),r.src=c.imgSrc.value;const e=c.getScale(r,a),t=e*c.translateValue.x/c.scale,n=e*c.translateValue.y/c.scale;r.style.transform=`translate(${t}px, ${n}px) scale(${e})`},i.button.onclick=()=>{i.load(),this.register(t.value,s.input.value)},[e,s].forEach(e=>e.onsubmit=()=>{const e=t.value;e.length>0&&(i.load(),this.register(e,s.input.value))})}register(e,t){E.registerUser(e,t)}}customElements.define("tg-registration",Te),n.d(t,"App",(function(){return Pe}));class Pe{constructor(){E.authState.subscribe(e=>this.renderLogin(e)),document.body.style.margin="0",document.body.style.fontFamily='"Helvetica", "Arial", sans-serif',this.css(),this.login=document.createElement("div"),document.body.appendChild(this.login)}renderLogin(e){switch(this.clearLogin(),e.authorization_state["@type"]){case T.WaitTdlibParameters:break;case T.WaitEncryptionKey:E.checkDatabaseEncryptionKey();break;case T.WaitPhoneNumber:this.login.appendChild(new Se);break;case T.WaitCode:const t=new ge(e);this.login.appendChild(t),t.editPhone.subscribe(e=>this.renderPhone(e));break;case T.WaitPassword:this.login.appendChild(new Me);break;case T.WaitRegistration:this.login.appendChild(new Te);break;case T.Ready:this.renderMain();break;case T.Closed:E.createClient();break;case T.LoggingOut:case T.Closing:break;default:console.log("DEFAULT AUTH STATE")}}renderPhone(e){this.clearLogin(),this.login.appendChild(new Se(e))}clearLogin(){for(this.main&&this.main.remove();this.login.firstChild;)this.login.firstChild.remove()}renderMain(){this.clearLogin(),this.main=new he,document.body.appendChild(this.main)}css(){document.body.innerHTML="<style>\n    :root {\n        --invalid-color: rgb(211, 55, 55);\n        --form-color: rgb(83, 166, 243);\n        --form-width: 360px;\n        --form-height: 54px;\n        --border-radius: 10px;\n    }\n    \n    .login-column {\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n        width: var(--form-width);\n        margin: auto;\n    }\n    \n    .login-caption {\n        color: rgb(112, 117, 121);\n        max-width: 220px;\n        text-align: center;\n        margin: 7px 0 38px;\n    }\n    \n    .login-header {\n        margin: 40px 0 7px;\n    }\n    \n    .main-logo {\n        margin-top: 100px;\n    }\n    \n    .country-button-img {\n        fill: var(--form-color);\n    }\n    \n    .country:hover {\n        background-color: rgb(244, 244, 245);\n    }\n    \n    .country {\n        padding: 0 16px;\n        cursor: pointer;\n        z-index: 10;\n    }\n    \n    \n    .country-item {\n        display: flex;\n        align-items: center;\n        height: 56px;\n    }\n    \n    .country-name {\n        width: 100%;\n        margin: 0 15px;\n        font-size: 14px;\n    }\n    \n    .country-code {\n        white-space: nowrap;\n    }\n    \n    .flag-icon {\n        margin-right: 15px;\n        width: 24px;\n    }\n    \n    .flag-icon, .country-name, .country-code, .country-item {\n        pointer-events: none;\n    }\n    \n    .country-list {\n        position: absolute;\n        display: flex;\n        flex-direction: column;\n        top: calc(var(--form-height) + 6px);\n        width: var(--form-width);\n        max-height: 300px;\n        box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);\n        border-radius: var(--border-radius);\n        z-index: 10;\n        background-color: white;\n        overflow-y: auto;\n    }\n    \n    .next {\n        width: var(--form-width);\n        height: var(--form-height);\n        border: none;\n        background-color: var(--form-color);\n        color: white;\n        border-radius: var(--border-radius);\n        font-size: 14px;\n        margin: 12px;\n        cursor: pointer;\n    }\n    \n    .login-checkbox {\n        display: flex;\n        align-items: center;\n        align-self: flex-start;\n        margin: 12px 0 36px;\n    }\n    \n    .code-edit {\n        margin: 0 6px;\n        height: 20px;\n        cursor: pointer;\n    }\n    \n    .monkey-face {\n        position: relative;\n        height: 160px;\n        width: 160px;\n        margin-top: 110px;\n    }\n    \n    .animation-container {\n        position: absolute;\n        left: 0;\n        top: 0;\n        height: 160px;\n        width: 160px;\n    }\n    \n    .checkbox-img {\n        margin: 0 20px;\n    }\n    \n    .hide {\n        display: none;\n    }\n    \n    .number {\n        position: absolute;\n        left: 18px;\n        top: 18px;\n    }\n    \n    .caption {\n        padding: 0 4px;\n        position: absolute;\n        left: 14px;\n        top: -6px;\n        background-color: white;\n        font-size: 12px;\n        color: rgb(102, 102, 102);\n    }\n    \n    form {\n        position: relative;\n        width: var(--form-width);\n        height: var(--form-height);\n        margin: 12px;\n    }\n    \n    .country-button {\n        z-index: -1;\n    }\n    \n    .form-button {\n        position: absolute;\n        right: 11px;\n        top: 11px;\n        border: none;\n        background-color: transparent;\n        border-radius: 50%;\n        height: 34px;\n        width: 34px;\n        cursor: pointer;\n    }\n    \n    ::-webkit-credentials-auto-fill-button {\n        visibility: hidden;\n        pointer-events: none;\n        position: absolute;\n        right: 0;\n    }\n    \n    input {\n        padding: 17px 16px;\n        border: solid 2px rgb(218, 220, 224);\n        border-radius: var(--border-radius);\n        font-size: 14px;\n        outline: none;\n        width: calc(100% - 38px);\n        height: calc(100% - 38px);\n        background-color: transparent;\n        caret-color: var(--form-color);\n    }\n    \n    .focus-caption {\n        color: rgb(57, 146, 233);\n    }\n    \n    input:focus {\n        border: solid 2px var(--form-color);\n    }\n    \n    .phone-input:focus::placeholder {\n        color: transparent;\n    }\n    \n    .phone-input-focus {\n        padding-left: 28px;\n        width: calc(100% - 50px);\n    }\n\n    .invalid-input, .invalid-input:focus {\n        border-color: var(--invalid-color);\n    }\n    \n    .invalid-caption {\n        color: var(--invalid-color);\n    }\n    \n    .photo-preview {\n        position: relative;\n        --img-diameter: 160px;\n        height: var(--img-diameter);\n        width: var(--img-diameter);\n        border-radius: 50%;\n        background-color: var(--form-color);\n        text-align: center;\n        line-height: var(--img-diameter);\n        cursor: pointer;\n        margin-top: 120px;\n        overflow: hidden;\n        z-index: 1;\n    }\n    \n    .add-photo {\n        vertical-align: middle;\n        width: 50px;\n        z-index: 2;\n    }\n    \n    .cancel-area {\n        position: fixed;\n        width: 100%;\n        height: 100%;\n        top: 0;\n        left: 0;\n        background-color: rgba(104, 104, 104, 0.5);\n        z-index: 5;\n    }\n    \n    .cancel-area-grab {\n        cursor: grab;\n    }\n    \n    .main-avatar {\n        position: absolute;\n        left: 0;\n        top: 0;\n        transform-origin: left top;\n        z-index: -1;\n        filter: brightness(70%);\n    }\n    \n    .photo-picker {\n        --diameter: 500px;\n        position: absolute;\n        top: calc(50% - var(--diameter) / 2);\n        left: calc(50% - var(--diameter) / 2);\n        width: var(--diameter);\n        height: var(--diameter);\n        box-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);\n        background-color: white;\n        \n        border-radius: 10px;\n        z-index: 1;\n    }\n    \n    .avatar-rect {\n        position: relative;\n        overflow: hidden;\n        width: 360px;\n        height: 360px;\n        margin: 70px;\n        background-color: transparent;\n        cursor: grab;\n        border-radius: 6px;\n        z-index: 1;\n    }\n\n    .avatar-img {\n        position: absolute;\n        z-index: -1;\n        left: 0;\n        top: 0;\n        transform-origin: left top;\n    }\n\n    .avatar-round {\n        position: relative;\n        margin: 20px;\n        width: 320px;\n        height: 320px;\n        border-radius: 50%;\n        box-shadow: 0 0 2000px 2000px rgba(255, 255, 255, 0.5);\n    }\n    \n    .close-picker {\n        cursor: pointer;\n        position: absolute;\n        left: 20px;\n        top: 20px;\n    }\n    \n    .check-picker {\n        cursor: pointer;\n        position: absolute;\n        right: 20px;\n        bottom: 20px;\n        background-color: var(--form-color);\n        border: none;\n        width: 56px;\n        height: 56px;\n        border-radius: 50%;\n        box-shadow: 0 1px 2px rgb(209, 212, 215);\n    }\n    \n    .picker-caption {\n        position: absolute;\n        left: 68px;\n        top: 2px;\n    }\n</style>\n"}}new Pe}]);